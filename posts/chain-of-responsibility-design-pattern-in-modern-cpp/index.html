<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Chain of Responsibility Design Pattern in Modern C++ | Vishal Chovatiya</title>
<meta name=keywords content="advantages-and-disadvantages-of-chain-of-responsibility-design-pattern,benefits-of-chain-of-responsibility-design-pattern,boost-example-for-chain-of-responsibility-design-pattern,chain-of-responsibility-c,chain-of-responsibility-command-design-pattern,chain-of-responsibility-design-pattern-cpp,chain-of-responsibility-design-pattern-in-c,chain-of-responsibility-design-pattern-in-c-2,chain-of-responsibility-design-pattern-in-modern-c,chain-of-responsibility-design-pattern-pros-and-cons,chain-of-responsibility-design-pattern-python,chain-of-responsibility-design-pattern-use-case,chain-of-responsibility-design-pattern-vs-decorator,chain-of-responsibility-pattern-c,chain-of-responsibility-vs-command-pattern,classic-examples-for-chain-of-responsibility-design-pattern-in-c,launch-and-leave,when-should-i-use-chain-of-responsibility-design-pattern,when-to-use-chain-of-responsibility-pattern"><meta name=description content="Chain of Responsibility is a Behavioural Design Pattern that provides facility to propagate event/request/command/query to the chain of loosely coupled objects. Chain of Responsibility Design Pattern in Modern C++ lets you pass requests along a chain of handlers & upon receiving a request, each handler decides either to process the request or to forward it to the next handler in the chain.
By the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:"><meta name=author content="Vishal Chovatiya"><link rel=canonical href=http://localhost:1313/posts/chain-of-responsibility-design-pattern-in-modern-cpp/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/trident_favicon.webp><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/images/trident_favicon.webp><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/images/trident_favicon.webp><link rel=apple-touch-icon href=http://localhost:1313/images/trident_favicon.webp><link rel=mask-icon href=http://localhost:1313/images/trident_favicon.webp><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/chain-of-responsibility-design-pattern-in-modern-cpp/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Chain of Responsibility Design Pattern in Modern C++"><meta property="og:description" content="Chain of Responsibility is a Behavioural Design Pattern that provides facility to propagate event/request/command/query to the chain of loosely coupled objects. Chain of Responsibility Design Pattern in Modern C++ lets you pass requests along a chain of handlers & upon receiving a request, each handler decides either to process the request or to forward it to the next handler in the chain.
By the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/chain-of-responsibility-design-pattern-in-modern-cpp/"><meta property="og:image" content="http://localhost:1313/images/Chain-of-Responsibility-Design-Pattern-in-Modern-C-vishal-chovatiya.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-03T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-03T00:00:00+00:00"><meta property="og:site_name" content="Vishal Chovatiya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/Chain-of-Responsibility-Design-Pattern-in-Modern-C-vishal-chovatiya.png"><meta name=twitter:title content="Chain of Responsibility Design Pattern in Modern C++"><meta name=twitter:description content="Chain of Responsibility is a Behavioural Design Pattern that provides facility to propagate event/request/command/query to the chain of loosely coupled objects. Chain of Responsibility Design Pattern in Modern C++ lets you pass requests along a chain of handlers & upon receiving a request, each handler decides either to process the request or to forward it to the next handler in the chain.
By the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Chain of Responsibility Design Pattern in Modern C++","item":"http://localhost:1313/posts/chain-of-responsibility-design-pattern-in-modern-cpp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Chain of Responsibility Design Pattern in Modern C++","name":"Chain of Responsibility Design Pattern in Modern C\u002b\u002b","description":"Chain of Responsibility is a Behavioural Design Pattern that provides facility to propagate event/request/command/query to the chain of loosely coupled objects. Chain of Responsibility Design Pattern in Modern C++ lets you pass requests along a chain of handlers \u0026amp; upon receiving a request, each handler decides either to process the request or to forward it to the next handler in the chain.\nBy the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:","keywords":["advantages-and-disadvantages-of-chain-of-responsibility-design-pattern","benefits-of-chain-of-responsibility-design-pattern","boost-example-for-chain-of-responsibility-design-pattern","chain-of-responsibility-c","chain-of-responsibility-command-design-pattern","chain-of-responsibility-design-pattern-cpp","chain-of-responsibility-design-pattern-in-c","chain-of-responsibility-design-pattern-in-c-2","chain-of-responsibility-design-pattern-in-modern-c","chain-of-responsibility-design-pattern-pros-and-cons","chain-of-responsibility-design-pattern-python","chain-of-responsibility-design-pattern-use-case","chain-of-responsibility-design-pattern-vs-decorator","chain-of-responsibility-pattern-c","chain-of-responsibility-vs-command-pattern","classic-examples-for-chain-of-responsibility-design-pattern-in-c","launch-and-leave","when-should-i-use-chain-of-responsibility-design-pattern","when-to-use-chain-of-responsibility-pattern"],"articleBody":"Chain of Responsibility is a Behavioural Design Pattern that provides facility to propagate event/request/command/query to the chain of loosely coupled objects. Chain of Responsibility Design Pattern in Modern C++ lets you pass requests along a chain of handlers \u0026 upon receiving a request, each handler decides either to process the request or to forward it to the next handler in the chain.\nBy the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:\nChain of responsibility Command Interpreter Iterator Mediator Memento Observer State Strategy Template Method Visitor The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like override, final, public(while inheritance) just to make code compact \u0026 consumable(most of the time) in single standard screen size. I also prefer struct instead of class just to save line by not writing “public:” sometimes and also miss virtual destructor, constructor, copy constructor, prefix std::, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.\nNote:\nIf you stumbled here directly, then I would suggest you go through What is design pattern? first, even if it is trivial. I believe it will encourage you to explore more on this topic. All of this code you encounter in this series of articles are compiled using C++20(though I have used Modern C++ features up to C++17 in most cases). So if you don’t have access to the latest compiler you can use https://wandbox.org/ which has preinstalled boost library as well. Intent To provide the chance to handle the request by more than one object/component.\nChain of Responsibility Design Pattern is a chain of loosely coupled objects who all get a chance to process command/query. And they may have some sort of default processing implementation and/or they can also terminate the processing chain and thereby preventing propagation of the event to the rest of the objects. In other words, its processing pipeline where you just launch-and-leave. Classic Examples for Chain of Responsibility Design Pattern in C++ A typical use-case for Chain of Responsibility is the login process. That requires a certain number of steps to complete successfully like user name, password, captcha, etc. to matched properly. Consider the following traditional example for the same: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 struct Authentication { Authentication* m_next{nullptr}; virtual bool authenticate() = 0; void next_authentication(Authentication *nextAuth) { m_next = nextAuth; } }; struct UserName : Authentication { string m_name; UserName(string name) : m_name(name){} bool is_valid_user_name() { return true; } bool authenticate() { if(!is_valid_user_name()) { cout \u003c\u003c \"Invalid user name\" \u003c\u003c endl; return false; } else if(m_next) return m_next-\u003eauthenticate(); return true; } }; struct Password : Authentication { string m_password; Password(string password) : m_password(password){} bool is_valid_password() { return true; } bool authenticate() { if(!is_valid_password()) { cout \u003c\u003c \"Invalid password\" \u003c\u003c endl; return false; } else if(m_next) return m_next-\u003eauthenticate(); return true; } }; int main() { Authentication *login{new UserName(\"John\")}; login-\u003enext_authentication(new Password(\"password\")); login-\u003eauthenticate(); return EXIT_SUCCESS; } I know this is not a very good example but sufficient to convey an idea of Chain of Responsibility. As you can see above, Login is a single process which requires multiple subprocesses to be carried out like username \u0026 password authentication. So in our case login-\u003eauthenticate(); fires the chain of responsibility to verify each step required for login one-by-one. You can also add more steps in the login process, for example, to add captcha, create captcha class inherited with Authentication \u0026 add that class object pointer in the login’s next authentication chain as we did for UserName \u0026 Password. Now before we move on to the more sophisticated implementations I just wanted to mention the fact that this particular implementation of a chain of responsibility seems quite artificial. Because essentially what’s happening here is you’re building a singly linked list so the question is well why not just use a std::list or a std::vector. It’s certainly a very valid concern. But as I mentioned earlier, this is how people used to build chain irresponsibilities. Boost Example for Chain of Responsibility Design Pattern What you going to see now is a modern way of implementing the Chain of Responsibility Design Pattern that is known as Event Broker. Which is actually a combination of several design patterns like Command, Mediator \u0026 Observer. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 #include #include using namespace std; #include //using namespace boost::signals2; struct Query { // Command int32_t m_cnt{0}; }; struct EventObserver { // Observer boost::signals2::signal\u003cvoid(Query \u0026)\u003e m_handlers; }; struct ExampleClass : EventObserver { // Mediator void generate_event() { cout \u003c\u003c \"Event generated\" \u003c\u003c endl; Query q; m_handlers(q); cout \u003c\u003c endl; } }; struct BaseHandler { ExampleClass\u0026 m_example; }; struct Handler_1 : BaseHandler { boost::signals2::connection m_conn; Handler_1(ExampleClass \u0026example) : BaseHandler{example} { m_conn = m_example.m_handlers.connect([\u0026](Query \u0026q) { cout \u003c\u003c \"Serving by Handler_1 : count = \" \u003c\u003c ++q.m_cnt \u003c\u003c endl; }); } ~Handler_1() { m_conn.disconnect(); } }; struct Handler_2 : BaseHandler { boost::signals2::connection m_conn; Handler_2(ExampleClass \u0026example) : BaseHandler{example} { m_conn = m_example.m_handlers.connect([\u0026](Query \u0026q) { cout \u003c\u003c \"Serving by Handler_2 : count = \" \u003c\u003c ++q.m_cnt \u003c\u003c endl; }); } ~Handler_2() { m_conn.disconnect(); } }; int main() { ExampleClass example; Handler_1 applyThisHandlerOn{example}; example.generate_event(); // Will be served by Handler_1 { Handler_2 TemporaryHandler{example}; example.generate_event(); // Will be served by Handler_1 \u0026 Handler_2 } example.generate_event(); // Will be served by Handler_1 return EXIT_SUCCESS; } /* Event generated Serving by Handler_1 : count = 1 Event generated Serving by Handler_1 : count = 1 Serving by Handler_2 : count = 2 Event generated Serving by Handler_1 : count = 1 */ So as you can see, we have ExampleClass which generates an event \u0026 having boost::signal2 as an observer. We have Query(i.e. Command Design Pattern) to pass between all the register handlers. Then we have handler arrangement which registers the lambda function to handle the event in constructor \u0026 same will be de-register in the destructor. In main, we have facilitated the ad-hoc registration of handlers just by declaring objects which process the Query passed in ExampleClass::generate_event() Handler automatically de-registers itself when it goes out of scope thanks to RAII. Benefits of Chain of Responsibility Design Pattern Decouples the sender \u0026 receiver as we saw a more sophisticated approach using Mediator \u0026 Command Design Pattern. Simplifies code as the object which is generating event does not need to know the chain structure \u0026 command/query. Enhances flexibility of object assigned duties. By changing the members within the chain or change their order, allow dynamically adding or deleting responsibility. Increase extensibility as adding a new handler is very convenient. Summary by FAQs Can I use(or Difference) Chain of Responsibility Design Pattern over Decorator?\nWhen you in need of multiple Decorator. While you want to add new functionality dynamically. When you want a change of order in functionality configurable. For example, you created Decorator of WalkingAnimal \u0026 BarkingAnimal of Animal, and now you want both combined at run-time. In such case Chain of Responsibility would be the right choice. When should I use Chain of Responsibility Design Pattern?\nWhen there is more than one object to service a request. These objects \u0026 its order determined at run time on the basis of request type. When you do not want to bind request \u0026 handler tightly. ","wordCount":"1337","inLanguage":"en","image":"http://localhost:1313/images/Chain-of-Responsibility-Design-Pattern-in-Modern-C-vishal-chovatiya.png","datePublished":"2020-04-03T00:00:00Z","dateModified":"2020-04-03T00:00:00Z","author":{"@type":"Person","name":"Vishal Chovatiya"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/chain-of-responsibility-design-pattern-in-modern-cpp/"},"publisher":{"@type":"Organization","name":"Vishal Chovatiya","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/trident_favicon.webp"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Vishal Chovatiya (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Vishal Chovatiya</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/pages/vishal-chovatiya title="About Me"><span>About Me</span></a></li><li><a href=http://localhost:1313/pages/start-here title="Start Here"><span>Start Here</span></a></li><li><a href=http://localhost:1313/posts/ title=Latest><span>Latest</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Chain of Responsibility Design Pattern in Modern C++</h1><div class=post-meta><span title='2020-04-03 00:00:00 +0000 UTC'>April 3, 2020</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1337 words&nbsp;·&nbsp;Vishal Chovatiya&nbsp;|&nbsp;<a href=https://github.com/vishalchovatiya/blog/blob/main/vishalchovatiya/content/posts/chain-of-responsibility-design-pattern-in-modern-cpp.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=http://localhost:1313/images/Chain-of-Responsibility-Design-Pattern-in-Modern-C-vishal-chovatiya.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#intent>Intent</a></li><li><a href=#classic-examples-for-chain-of-responsibility-design-pattern-in-c>Classic Examples for Chain of Responsibility Design Pattern in C++</a></li><li><a href=#boost-example-for-chain-of-responsibility-design-pattern>Boost Example for Chain of Responsibility Design Pattern</a></li><li><a href=#benefits-of-chain-of-responsibility-design-pattern>Benefits of Chain of Responsibility Design Pattern</a></li><li><a href=#summary-by-faqs>Summary by FAQs</a></li></ul></nav></div></details></div><div class=post-content><p>Chain of Responsibility is a Behavioural Design Pattern that <strong><em>provides facility to propagate event/request/command/query to the chain of loosely coupled objects</em></strong>. Chain of Responsibility Design Pattern in Modern C++ lets you pass requests along a chain of handlers & upon receiving a request, each handler decides either to process the request or to forward it to the next handler in the chain.</p><p>By the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:</p><ol><li><a href=/posts//chain-of-responsibility-design-pattern-in-modern-cpp/>Chain of responsibility</a></li><li><a href=/posts//command-design-pattern-in-modern-cpp/>Command</a></li><li><a href=/posts//interpreter-design-pattern-in-modern-cpp/>Interpreter</a></li><li><a href=/posts//iterator-design-pattern-in-modern-cpp/>Iterator</a></li><li><a href=/posts//mediator-design-pattern-in-modern-cpp/>Mediator</a></li><li><a href=/posts//memento-design-pattern-in-modern-cpp/>Memento</a></li><li><a href=/posts//observer-design-pattern-in-modern-cpp/>Observer</a></li><li><a href=/posts//state-design-pattern-in-modern-cpp/>State</a></li><li><a href=/posts//strategy-design-pattern-in-modern-cpp/>Strategy</a></li><li><a href=/posts//template-method-design-pattern-in-modern-cpp/>Template Method</a></li><li><a href=/posts//double-dispatch-visitor-design-pattern-in-modern-cpp/>Visitor</a></li></ol><p>The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like <code>override</code>, <code>final</code>, <code>public</code>(while inheritance) just to make code compact & consumable(most of the time) in single standard screen size. I also prefer <code>struct</code> instead of <code>class</code> just to save line by not writing &ldquo;<code>public:</code>&rdquo; sometimes and also miss <a href=/posts//part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/>virtual destructor</a>, constructor, <a href=/posts//all-about-copy-constructor-in-cpp-with-example/>copy constructor</a>, prefix <code>std::</code>, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.</p><p><strong><em>Note:</em></strong></p><ul><li>If you stumbled here directly, then I would suggest you go through <a href=/posts//what-is-design-pattern/>What is design pattern?</a> first, even if it is trivial. I believe it will encourage you to explore more on this topic.</li><li>All of this code you encounter in this series of articles are compiled using C++20(though I have used <a href=/posts//21-new-features-of-modern-cpp-to-use-in-your-project/>Modern C++</a> features up to C++17 in most cases). So if you don&rsquo;t have access to the latest compiler you can use <a href=https://wandbox.org/>https://wandbox.org/</a> which has preinstalled boost library as well.</li></ul><h2 id=intent>Intent<a hidden class=anchor aria-hidden=true href=#intent>#</a></h2><blockquote><p><strong><em>To provide the chance to handle the request by more than one object/component.</em></strong></p></blockquote><ul><li>Chain of Responsibility Design Pattern is a chain of loosely coupled objects who all get a chance to process command/query. And they may have some sort of default processing implementation and/or they can also terminate the processing chain and thereby preventing propagation of the event to the rest of the objects.</li><li>In other words, its <strong><em>processing pipeline where you just launch-and-leave</em></strong>.</li></ul><h2 id=classic-examples-for-chain-of-responsibility-design-pattern-in-c>Classic Examples for Chain of Responsibility Design Pattern in C++<a hidden class=anchor aria-hidden=true href=#classic-examples-for-chain-of-responsibility-design-pattern-in-c>#</a></h2><ul><li>A typical use-case for Chain of Responsibility is the login process. That requires a certain number of steps to complete successfully like user name, password, captcha, etc. to matched properly. Consider the following traditional example for the same:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Authentication</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Authentication</span><span class=o>*</span>     <span class=n>m_next</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>virtual</span> <span class=kt>bool</span> <span class=nf>authenticate</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span> <span class=nf>next_authentication</span><span class=p>(</span><span class=n>Authentication</span> <span class=o>*</span><span class=n>nextAuth</span><span class=p>)</span> <span class=p>{</span> <span class=n>m_next</span> <span class=o>=</span> <span class=n>nextAuth</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>UserName</span> <span class=o>:</span> <span class=n>Authentication</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>string</span>      <span class=n>m_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>UserName</span><span class=p>(</span><span class=n>string</span> <span class=n>name</span><span class=p>)</span> <span class=o>:</span> <span class=n>m_name</span><span class=p>(</span><span class=n>name</span><span class=p>){}</span>
</span></span><span class=line><span class=cl>	<span class=kt>bool</span> <span class=nf>is_valid_user_name</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=nb>true</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=kt>bool</span> <span class=nf>authenticate</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>is_valid_user_name</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Invalid user name&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>m_next</span><span class=p>)</span> <span class=k>return</span> <span class=n>m_next</span><span class=o>-&gt;</span><span class=n>authenticate</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Password</span> <span class=o>:</span> <span class=n>Authentication</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>string</span>      <span class=n>m_password</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>Password</span><span class=p>(</span><span class=n>string</span> <span class=n>password</span><span class=p>)</span> <span class=o>:</span> <span class=n>m_password</span><span class=p>(</span><span class=n>password</span><span class=p>){}</span>
</span></span><span class=line><span class=cl>	<span class=kt>bool</span> <span class=nf>is_valid_password</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=nb>true</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=kt>bool</span> <span class=nf>authenticate</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>is_valid_password</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Invalid password&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>m_next</span><span class=p>)</span> <span class=k>return</span> <span class=n>m_next</span><span class=o>-&gt;</span><span class=n>authenticate</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Authentication</span> <span class=o>*</span><span class=n>login</span><span class=p>{</span><span class=k>new</span> <span class=n>UserName</span><span class=p>(</span><span class=s>&#34;John&#34;</span><span class=p>)};</span>
</span></span><span class=line><span class=cl>	<span class=n>login</span><span class=o>-&gt;</span><span class=n>next_authentication</span><span class=p>(</span><span class=k>new</span> <span class=n>Password</span><span class=p>(</span><span class=s>&#34;password&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>	<span class=n>login</span><span class=o>-&gt;</span><span class=n>authenticate</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>I know this is not a very good example but sufficient to convey an idea of Chain of Responsibility. As you can see above, Login is a single process which requires multiple subprocesses to be carried out like username & password authentication.</li><li>So in our case <code>login->authenticate();</code> fires the chain of responsibility to verify each step required for login one-by-one.</li><li>You can also add more steps in the login process, for example, to add captcha, create captcha class inherited with <code>Authentication</code> & add that class object pointer in the login&rsquo;s next authentication chain as we did for <code>UserName</code> & <code>Password</code>.</li><li>Now before we move on to the more sophisticated implementations I just wanted to mention the fact that this particular implementation of a chain of responsibility seems quite artificial. Because essentially what&rsquo;s happening here is you&rsquo;re building a singly linked list so the question is well why not just use a <code>std::list</code> or a <code>std::vector</code>. It&rsquo;s certainly a very valid concern. But as I mentioned earlier, this is how people used to build chain irresponsibilities.</li></ul><h2 id=boost-example-for-chain-of-responsibility-design-pattern>Boost Example for Chain of Responsibility Design Pattern<a hidden class=anchor aria-hidden=true href=#boost-example-for-chain-of-responsibility-design-pattern>#</a></h2><ul><li>What you going to see now is a modern way of implementing the Chain of Responsibility Design Pattern that is known as <a href=https://en.wikipedia.org/wiki/Broker_pattern>Event Broker</a>. Which is actually a combination of several design patterns like <a href=/posts/command-design-pattern-in-modern-cpp/>Command</a>, <a href=/posts/mediator-design-pattern-in-modern-cpp/>Mediator</a> & <a href=/posts/observer-design-pattern-in-modern-cpp/>Observer</a>.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39>39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40>40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41>41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42>42</a>
</span><span class=lnt id=hl-1-43><a class=lnlinks href=#hl-1-43>43</a>
</span><span class=lnt id=hl-1-44><a class=lnlinks href=#hl-1-44>44</a>
</span><span class=lnt id=hl-1-45><a class=lnlinks href=#hl-1-45>45</a>
</span><span class=lnt id=hl-1-46><a class=lnlinks href=#hl-1-46>46</a>
</span><span class=lnt id=hl-1-47><a class=lnlinks href=#hl-1-47>47</a>
</span><span class=lnt id=hl-1-48><a class=lnlinks href=#hl-1-48>48</a>
</span><span class=lnt id=hl-1-49><a class=lnlinks href=#hl-1-49>49</a>
</span><span class=lnt id=hl-1-50><a class=lnlinks href=#hl-1-50>50</a>
</span><span class=lnt id=hl-1-51><a class=lnlinks href=#hl-1-51>51</a>
</span><span class=lnt id=hl-1-52><a class=lnlinks href=#hl-1-52>52</a>
</span><span class=lnt id=hl-1-53><a class=lnlinks href=#hl-1-53>53</a>
</span><span class=lnt id=hl-1-54><a class=lnlinks href=#hl-1-54>54</a>
</span><span class=lnt id=hl-1-55><a class=lnlinks href=#hl-1-55>55</a>
</span><span class=lnt id=hl-1-56><a class=lnlinks href=#hl-1-56>56</a>
</span><span class=lnt id=hl-1-57><a class=lnlinks href=#hl-1-57>57</a>
</span><span class=lnt id=hl-1-58><a class=lnlinks href=#hl-1-58>58</a>
</span><span class=lnt id=hl-1-59><a class=lnlinks href=#hl-1-59>59</a>
</span><span class=lnt id=hl-1-60><a class=lnlinks href=#hl-1-60>60</a>
</span><span class=lnt id=hl-1-61><a class=lnlinks href=#hl-1-61>61</a>
</span><span class=lnt id=hl-1-62><a class=lnlinks href=#hl-1-62>62</a>
</span><span class=lnt id=hl-1-63><a class=lnlinks href=#hl-1-63>63</a>
</span><span class=lnt id=hl-1-64><a class=lnlinks href=#hl-1-64>64</a>
</span><span class=lnt id=hl-1-65><a class=lnlinks href=#hl-1-65>65</a>
</span><span class=lnt id=hl-1-66><a class=lnlinks href=#hl-1-66>66</a>
</span><span class=lnt id=hl-1-67><a class=lnlinks href=#hl-1-67>67</a>
</span><span class=lnt id=hl-1-68><a class=lnlinks href=#hl-1-68>68</a>
</span><span class=lnt id=hl-1-69><a class=lnlinks href=#hl-1-69>69</a>
</span><span class=lnt id=hl-1-70><a class=lnlinks href=#hl-1-70>70</a>
</span><span class=lnt id=hl-1-71><a class=lnlinks href=#hl-1-71>71</a>
</span><span class=lnt id=hl-1-72><a class=lnlinks href=#hl-1-72>72</a>
</span><span class=lnt id=hl-1-73><a class=lnlinks href=#hl-1-73>73</a>
</span><span class=lnt id=hl-1-74><a class=lnlinks href=#hl-1-74>74</a>
</span><span class=lnt id=hl-1-75><a class=lnlinks href=#hl-1-75>75</a>
</span><span class=lnt id=hl-1-76><a class=lnlinks href=#hl-1-76>76</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;boost/signals2.hpp&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>//using namespace boost::signals2;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Query</span> <span class=p>{</span>                          <span class=c1>// Command
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int32_t</span>     <span class=n>m_cnt</span><span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>EventObserver</span> <span class=p>{</span>                  <span class=c1>// Observer
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>boost</span><span class=o>::</span><span class=n>signals2</span><span class=o>::</span><span class=n>signal</span><span class=o>&lt;</span><span class=kt>void</span><span class=p>(</span><span class=n>Query</span> <span class=o>&amp;</span><span class=p>)</span><span class=o>&gt;</span>       <span class=n>m_handlers</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>ExampleClass</span> <span class=o>:</span> <span class=n>EventObserver</span> <span class=p>{</span>   <span class=c1>// Mediator
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=nf>generate_event</span><span class=p>()</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Event generated&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Query</span>   <span class=n>q</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>m_handlers</span><span class=p>(</span><span class=n>q</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>BaseHandler</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ExampleClass</span><span class=o>&amp;</span>       <span class=n>m_example</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Handler_1</span> <span class=o>:</span> <span class=n>BaseHandler</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>boost</span><span class=o>::</span><span class=n>signals2</span><span class=o>::</span><span class=n>connection</span>      <span class=n>m_conn</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Handler_1</span><span class=p>(</span><span class=n>ExampleClass</span> <span class=o>&amp;</span><span class=n>example</span><span class=p>)</span> <span class=o>:</span> <span class=n>BaseHandler</span><span class=p>{</span><span class=n>example</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m_conn</span> <span class=o>=</span> <span class=n>m_example</span><span class=p>.</span><span class=n>m_handlers</span><span class=p>.</span><span class=n>connect</span><span class=p>([</span><span class=o>&amp;</span><span class=p>](</span><span class=n>Query</span> <span class=o>&amp;</span><span class=n>q</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Serving by Handler_1 : count = &#34;</span> <span class=o>&lt;&lt;</span> <span class=o>++</span><span class=n>q</span><span class=p>.</span><span class=n>m_cnt</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>Handler_1</span><span class=p>()</span> <span class=p>{</span> <span class=n>m_conn</span><span class=p>.</span><span class=n>disconnect</span><span class=p>();</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Handler_2</span> <span class=o>:</span> <span class=n>BaseHandler</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>boost</span><span class=o>::</span><span class=n>signals2</span><span class=o>::</span><span class=n>connection</span>      <span class=n>m_conn</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Handler_2</span><span class=p>(</span><span class=n>ExampleClass</span> <span class=o>&amp;</span><span class=n>example</span><span class=p>)</span> <span class=o>:</span> <span class=n>BaseHandler</span><span class=p>{</span><span class=n>example</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m_conn</span> <span class=o>=</span> <span class=n>m_example</span><span class=p>.</span><span class=n>m_handlers</span><span class=p>.</span><span class=n>connect</span><span class=p>([</span><span class=o>&amp;</span><span class=p>](</span><span class=n>Query</span> <span class=o>&amp;</span><span class=n>q</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Serving by Handler_2 : count = &#34;</span> <span class=o>&lt;&lt;</span> <span class=o>++</span><span class=n>q</span><span class=p>.</span><span class=n>m_cnt</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>Handler_2</span><span class=p>()</span> <span class=p>{</span> <span class=n>m_conn</span><span class=p>.</span><span class=n>disconnect</span><span class=p>();</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ExampleClass</span> <span class=n>example</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Handler_1</span> <span class=n>applyThisHandlerOn</span><span class=p>{</span><span class=n>example</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>example</span><span class=p>.</span><span class=n>generate_event</span><span class=p>();</span>       <span class=c1>// Will be served by Handler_1
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=n>Handler_2</span> <span class=n>TemporaryHandler</span><span class=p>{</span><span class=n>example</span><span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=n>example</span><span class=p>.</span><span class=n>generate_event</span><span class=p>();</span>   <span class=c1>// Will be served by Handler_1 &amp; Handler_2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>example</span><span class=p>.</span><span class=n>generate_event</span><span class=p>();</span>       <span class=c1>// Will be served by Handler_1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Event generated
</span></span></span><span class=line><span class=cl><span class=cm>Serving by Handler_1 : count = 1
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>Event generated
</span></span></span><span class=line><span class=cl><span class=cm>Serving by Handler_1 : count = 1
</span></span></span><span class=line><span class=cl><span class=cm>Serving by Handler_2 : count = 2
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>Event generated
</span></span></span><span class=line><span class=cl><span class=cm>Serving by Handler_1 : count = 1
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>So as you can see, we have <code>ExampleClass</code> which generates an event & having <code>boost::signal2</code> as an observer. We have <code>Query</code>(i.e. <a href=/posts/command-design-pattern-in-modern-cpp/>Command Design Pattern</a>) to pass between all the register handlers.</li><li>Then we have handler arrangement which registers the <a href=/posts/learn-lambda-function-in-cpp-with-example/>lambda function</a> to handle the event in constructor & same will be de-register in the destructor.</li><li>In main, we have facilitated the ad-hoc registration of handlers just by declaring objects which process the <code>Query</code> passed in <code>ExampleClass::generate_event()</code> Handler automatically de-registers itself when it goes out of scope thanks to <a href=https://en.cppreference.com/w/cpp/language/raii>RAII</a>.</li></ul><h2 id=benefits-of-chain-of-responsibility-design-pattern>Benefits of Chain of Responsibility Design Pattern<a hidden class=anchor aria-hidden=true href=#benefits-of-chain-of-responsibility-design-pattern>#</a></h2><ol><li>Decouples the sender & receiver as we saw a more sophisticated approach using <a href=/posts/mediator-design-pattern-in-modern-cpp/>Mediator</a> & <a href=/posts/command-design-pattern-in-modern-cpp/>Command Design Pattern</a>.</li><li>Simplifies code as the object which is generating event does not need to know the chain structure & command/query.</li><li>Enhances flexibility of object assigned duties. By changing the members within the chain or change their order, allow dynamically adding or deleting responsibility.</li><li>Increase extensibility as adding a new handler is very convenient.</li></ol><h2 id=summary-by-faqs>Summary by FAQs<a hidden class=anchor aria-hidden=true href=#summary-by-faqs>#</a></h2><p><strong>Can I use(or Difference) Chain of Responsibility Design Pattern over Decorator?</strong></p><ul><li>When you in need of multiple Decorator.</li><li>While you want to add new functionality dynamically.</li><li>When you want a change of order in functionality configurable.</li><li>For example, you created Decorator of <code>WalkingAnimal</code> & <code>BarkingAnimal</code> of <code>Animal</code>, and now you want both combined at run-time. In such case Chain of Responsibility would be the right choice.</li></ul><p><strong>When should I use Chain of Responsibility Design Pattern?</strong></p><ul><li>When there is more than one object to service a request.</li><li>These objects & its order determined at run time on the basis of request type.</li><li>When you do not want to bind request & handler tightly.</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/advantages-and-disadvantages-of-chain-of-responsibility-design-pattern/>Advantages-and-Disadvantages-of-Chain-of-Responsibility-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/benefits-of-chain-of-responsibility-design-pattern/>Benefits-of-Chain-of-Responsibility-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/boost-example-for-chain-of-responsibility-design-pattern/>Boost-Example-for-Chain-of-Responsibility-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-c/>Chain-of-Responsibility-C</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-command-design-pattern/>Chain-of-Responsibility-Command-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-cpp/>Chain-of-Responsibility-Design-Pattern-Cpp</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-in-c/>Chain-of-Responsibility-Design-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-in-c-2/>Chain-of-Responsibility-Design-Pattern-in-C-2</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-in-modern-c/>Chain-of-Responsibility-Design-Pattern-in-Modern-C</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-pros-and-cons/>Chain-of-Responsibility-Design-Pattern-Pros-and-Cons</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-python/>Chain-of-Responsibility-Design-Pattern-Python</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-use-case/>Chain-of-Responsibility-Design-Pattern-Use-Case</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-design-pattern-vs-decorator/>Chain-of-Responsibility-Design-Pattern-vs-Decorator</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-pattern-c/>Chain-of-Responsibility-Pattern-C</a></li><li><a href=http://localhost:1313/tags/chain-of-responsibility-vs-command-pattern/>Chain-of-Responsibility-vs-Command-Pattern</a></li><li><a href=http://localhost:1313/tags/classic-examples-for-chain-of-responsibility-design-pattern-in-c/>Classic-Examples-for-Chain-of-Responsibility-Design-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/launch-and-leave/>Launch-and-Leave</a></li><li><a href=http://localhost:1313/tags/when-should-i-use-chain-of-responsibility-design-pattern/>When-Should-I-Use-Chain-of-Responsibility-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/when-to-use-chain-of-responsibility-pattern/>When-to-Use-Chain-of-Responsibility-Pattern</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/proxy-design-pattern-in-modern-cpp/><span class=title>« Prev</span><br><span>Proxy Design Pattern in Modern C++</span>
</a><a class=next href=http://localhost:1313/posts/command-design-pattern-in-modern-cpp/><span class=title>Next »</span><br><span>Command Design Pattern in Modern C++</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on x" href="https://x.com/intent/tweet/?text=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f&amp;hashtags=advantages-and-disadvantages-of-chain-of-responsibility-design-pattern%2cbenefits-of-chain-of-responsibility-design-pattern%2cboost-example-for-chain-of-responsibility-design-pattern%2cchain-of-responsibility-c%2cchain-of-responsibility-command-design-pattern%2cchain-of-responsibility-design-pattern-cpp%2cchain-of-responsibility-design-pattern-in-c%2cchain-of-responsibility-design-pattern-in-c-2%2cchain-of-responsibility-design-pattern-in-modern-c%2cchain-of-responsibility-design-pattern-pros-and-cons%2cchain-of-responsibility-design-pattern-python%2cchain-of-responsibility-design-pattern-use-case%2cchain-of-responsibility-design-pattern-vs-decorator%2cchain-of-responsibility-pattern-c%2cchain-of-responsibility-vs-command-pattern%2cclassic-examples-for-chain-of-responsibility-design-pattern-in-c%2claunch-and-leave%2cwhen-should-i-use-chain-of-responsibility-design-pattern%2cwhen-to-use-chain-of-responsibility-pattern"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f&amp;title=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;summary=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f&title=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on whatsapp" href="https://api.whatsapp.com/send?text=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on telegram" href="https://telegram.me/share/url?text=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Chain of Responsibility Design Pattern in Modern C++ on ycombinator" href="https://news.ycombinator.com/submitlink?t=Chain%20of%20Responsibility%20Design%20Pattern%20in%20Modern%20C%2b%2b&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fchain-of-responsibility-design-pattern-in-modern-cpp%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Vishal Chovatiya</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>