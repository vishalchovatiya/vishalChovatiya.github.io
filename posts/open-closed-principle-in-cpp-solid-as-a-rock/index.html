<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Open Closed Principle in C++ | SOLID as a Rock | Vishal Chovatiya</title>
<meta name=keywords content="ciple-extensibility1,flexibility1,intent-open-closed-principle1,ion-for-extensibility-benefits-of-open-closed-prin1,le-example-in-c-adding-the-level-of-abstract1,le-open-closed-principle-code-e1,maintainability1,motivation-violating-the-ope1,n-closed-principle-solution-open-closed-princip1,open-closed-principle-c1,open-closed-principle-in-c1,open-closed-principle-in-cpp1,software-open-closed-princip1,xamples-open-closed-principle-in-c1,yardstick-to-craft-open-closed-principle-friendly-software-in-c"><meta name=description content="This is the second part of a five-part article series about SOLID as Rock design principle. The SOLID design principles, when combined together, make it easy for a programmer to craft software that is easy to maintain, reuse & extend. Open-Closed Principle(OCP) is the second principle in this series which I will discuss here with minimalistic example in Modern C++ along with its benefits & generic guideline.
By the way, If you haven&rsquo;t gone through my previous articles on design principles, then below is the quick links:"><meta name=author content="Vishal Chovatiya"><link rel=canonical href=https://vishalchovatiya.github.io/posts/open-closed-principle-in-cpp-solid-as-a-rock/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://vishalchovatiya.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://vishalchovatiya.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://vishalchovatiya.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://vishalchovatiya.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://vishalchovatiya.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://vishalchovatiya.github.io/posts/open-closed-principle-in-cpp-solid-as-a-rock/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Open Closed Principle in C++ | SOLID as a Rock"><meta property="og:description" content="This is the second part of a five-part article series about SOLID as Rock design principle. The SOLID design principles, when combined together, make it easy for a programmer to craft software that is easy to maintain, reuse & extend. Open-Closed Principle(OCP) is the second principle in this series which I will discuss here with minimalistic example in Modern C++ along with its benefits & generic guideline.
By the way, If you haven&rsquo;t gone through my previous articles on design principles, then below is the quick links:"><meta property="og:type" content="article"><meta property="og:url" content="https://vishalchovatiya.github.io/posts/open-closed-principle-in-cpp-solid-as-a-rock/"><meta property="og:image" content="https://vishalchovatiya.github.io/images/Open-Closed-Principle-in-C-SOLID-as-a-Rock-vishal-chovatiya.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-07T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-07T00:00:00+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://vishalchovatiya.github.io/images/Open-Closed-Principle-in-C-SOLID-as-a-Rock-vishal-chovatiya.webp"><meta name=twitter:title content="Open Closed Principle in C++ | SOLID as a Rock"><meta name=twitter:description content="This is the second part of a five-part article series about SOLID as Rock design principle. The SOLID design principles, when combined together, make it easy for a programmer to craft software that is easy to maintain, reuse & extend. Open-Closed Principle(OCP) is the second principle in this series which I will discuss here with minimalistic example in Modern C++ along with its benefits & generic guideline.
By the way, If you haven&rsquo;t gone through my previous articles on design principles, then below is the quick links:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://vishalchovatiya.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Open Closed Principle in C++ | SOLID as a Rock","item":"https://vishalchovatiya.github.io/posts/open-closed-principle-in-cpp-solid-as-a-rock/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Open Closed Principle in C++ | SOLID as a Rock","name":"Open Closed Principle in C\u002b\u002b | SOLID as a Rock","description":"This is the second part of a five-part article series about SOLID as Rock design principle. The SOLID design principles, when combined together, make it easy for a programmer to craft software that is easy to maintain, reuse \u0026amp; extend. Open-Closed Principle(OCP) is the second principle in this series which I will discuss here with minimalistic example in Modern C++ along with its benefits \u0026amp; generic guideline.\nBy the way, If you haven\u0026rsquo;t gone through my previous articles on design principles, then below is the quick links:","keywords":["ciple-extensibility1","flexibility1","intent-open-closed-principle1","ion-for-extensibility-benefits-of-open-closed-prin1","le-example-in-c-adding-the-level-of-abstract1","le-open-closed-principle-code-e1","maintainability1","motivation-violating-the-ope1","n-closed-principle-solution-open-closed-princip1","open-closed-principle-c1","open-closed-principle-in-c1","open-closed-principle-in-cpp1","software-open-closed-princip1","xamples-open-closed-principle-in-c1","yardstick-to-craft-open-closed-principle-friendly-software-in-c"],"articleBody":"This is the second part of a five-part article series about SOLID as Rock design principle. The SOLID design principles, when combined together, make it easy for a programmer to craft software that is easy to maintain, reuse \u0026 extend. Open-Closed Principle(OCP) is the second principle in this series which I will discuss here with minimalistic example in Modern C++ along with its benefits \u0026 generic guideline.\nBy the way, If you haven’t gone through my previous articles on design principles, then below is the quick links:\nSRP – Single Responsibility Principle OCP – Open/Closed Principle LSP – Liskov Substitution Principle ISP – Interface Segregation Principle DIP – Dependency Inversion Principle The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like override, final, public(while inheritance) just to make code compact \u0026 consumable(most of the time) in single standard screen size. I also prefer struct instead of class just to save line by not writing “public:” sometimes and also miss virtual destructor, constructor, copy constructor, prefix std::, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.\nNote:\nIf you stumbled here directly, then I would suggest you go through What is design pattern? first, even if it is trivial. I believe it will encourage you to explore more on this topic. All of this code you encounter in this series of articles are compiled using C++20(though I have used Modern C++ features up to C++17 in most cases). So if you don’t have access to the latest compiler you can use https://wandbox.org/ which has preinstalled boost library as well. Intent classes should be open for extension, closed for modification\nThis literally means you should be able to extend a classes behaviour, without modifying it. This might seems weird to you \u0026 may raise a question that how can you change the behaviour of a class without modifying it? But there are many answers to this in object-oriented design like dynamic polymorphism, static polymorphism, C++ template, etc. Motivation: Violating the Open Closed Principle enum class COLOR { RED, GREEN, BLUE }; enum class SIZE { SMALL, MEDIUM, LARGE }; struct Product { string m_name; COLOR m_color; SIZE m_size; }; using Items = vector\u003cProduct*\u003e; #define ALL(C) begin(C), end(C) struct ProductFilter { static Items by_color(Items items, const COLOR e_color) { Items result; for (auto \u0026i : items) if (i-\u003em_color == e_color) result.push_back(i); return result; } static Items by_size(Items items, const SIZE e_size) { Items result; for (auto \u0026i : items) if (i-\u003em_size == e_size) result.push_back(i); return result; } static Items by_size_and_color(Items items, const SIZE e_size, const COLOR e_color) { Items result; for (auto \u0026i : items) if (i-\u003em_size == e_size \u0026\u0026 i-\u003em_color == e_color) result.push_back(i); return result; } }; int main() { const Items all{ new Product{\"Apple\", COLOR::GREEN, SIZE::SMALL}, new Product{\"Tree\", COLOR::GREEN, SIZE::LARGE}, new Product{\"House\", COLOR::BLUE, SIZE::LARGE}, }; for (auto \u0026p : ProductFilter::by_color(all, COLOR::GREEN)) cout \u003c\u003c p-\u003em_name \u003c\u003c \" is green\\n\"; for (auto \u0026p : ProductFilter::by_size_and_color(all, SIZE::LARGE, COLOR::GREEN)) cout \u003c\u003c p-\u003em_name \u003c\u003c \" is green \u0026 large\\n\"; return EXIT_SUCCESS; } /* Apple is green Tree is green Tree is green \u0026 large */ So we have a bunch of products \u0026 we filtered it by some of its attributes. There is nothing wrong with the above code as far as the requirement is fixed(which will never be the case in software engineering). But just imagine the situations: You already shipped the code to the client. Later on, requirement changes \u0026 some new filters are required. In this case, you again need to modify the class \u0026 add new filter methods. This is a problematic approach because we have 2 attributes(i.e. color \u0026 size) \u0026 need to implement 3 function(i.e. color, size \u0026 its combination), one more attributes \u0026 need to implement 8 functions. You see where this is going. You need to go again \u0026 again in the existing implemented code \u0026 have to modify it which may break other parts of code as well. This is not a scalable solution. The open-closed principle states that your system should be open to extension but should be closed for modification. Unfortunately what we are doing here is modifying the existing code which is a violation of OCP. Solution: Open Closed Principle Example in C++ There is more than one way to achieve OCP. Here I am demonstrating the popular one i.e. interface design or abstraction level. So here is our scalable solution:\nAdding the level of abstraction for extensibility template \u003ctypename T\u003e struct Specification { virtual ~Specification() = default; virtual bool is_satisfied(T *item) const = 0; }; struct ColorSpecification : Specification\u003cProduct\u003e { COLOR e_color; ColorSpecification(COLOR e_color) : e_color(e_color) {} bool is_satisfied(Product *item) const { return item-\u003em_color == e_color; } }; struct SizeSpecification : Specification\u003cProduct\u003e { SIZE e_size; SizeSpecification(SIZE e_size) : e_size(e_size) {} bool is_satisfied(Product *item) const { return item-\u003em_size == e_size; } }; template \u003ctypename T\u003e struct Filter { virtual vector\u003cT *\u003e filter(vector\u003cT *\u003e items, const Specification\u003cT\u003e \u0026spec) = 0; }; struct BetterFilter : Filter\u003cProduct\u003e { vector\u003cProduct *\u003e filter(vector\u003cProduct *\u003e items, const Specification\u003cProduct\u003e \u0026spec) { vector\u003cProduct *\u003e result; for (auto \u0026p : items) if (spec.is_satisfied(p)) result.push_back(p); return result; } }; // ------------------------------------------------------------------------------------------------ BetterFilter bf; for (auto \u0026x : bf.filter(all, ColorSpecification(COLOR::GREEN))) cout \u003c\u003c x-\u003em_name \u003c\u003c \" is green\\n\"; As you can see we do not have to modify filter method of BetterFilter. It can work with all kind of specification now. For two or more combined specifications template \u003ctypename T\u003e struct AndSpecification : Specification\u003cT\u003e { const Specification\u003cT\u003e \u0026first; const Specification\u003cT\u003e \u0026second; AndSpecification(const Specification\u003cT\u003e \u0026first, const Specification\u003cT\u003e \u0026second) : first(first), second(second) {} bool is_satisfied(T *item) const { return first.is_satisfied(item) \u0026\u0026 second.is_satisfied(item); } }; template \u003ctypename T\u003e AndSpecification\u003cT\u003e operator\u0026\u0026(const Specification\u003cT\u003e \u0026first, const Specification\u003cT\u003e \u0026second) { return {first, second}; } // ----------------------------------------------------------------------------------------------------- auto green_things = ColorSpecification{COLOR::GREEN}; auto large_things = SizeSpecification{SIZE::LARGE}; BetterFilter bf; for (auto \u0026x : bf.filter(all, green_things \u0026\u0026 large_things)) cout \u003c\u003c x-\u003em_name \u003c\u003c \" is green and large\\n\"; // warning: the following will compile but will NOT work // auto spec2 = SizeSpecification{SIZE::LARGE} \u0026\u0026 // ColorSpecification{COLOR::BLUE}; SizeSpecification{SIZE::LARGE} \u0026\u0026 ColorSpecification{COLOR::BLUE} will not work. Experienced C++ eyes can easily recognize the reason. Though temporary object creation is a hint here. If you do so, you may get the error of pure virtual function as follows: pure virtual method called terminate called without an active exception The terminal process terminated with exit code: 3 For more than two specifications, you can use a variadic template. Benefits of Open Closed Principle =\u003e Extensibility “When a single change to a program results in a cascade of changes to dependent modules, that program exhibits the undesirable attributes that we have come to associate with ‘bad’ design. The program becomes fragile, rigid, unpredictable and unreusable. The open-closed principle attacks this in a very straightforward way. It says that you should design modules that never change. When requirements change, you extend the behaviour of such modules by adding new code, not by changing old code that already works.”\n— Robert Martin\n=\u003e Maintainability The main benefit of this approach is that an interface introduces an additional level of abstraction which enables loose coupling. The implementations of an interface are independent of each other and don’t need to share any code. Thus, you can easily cope-up with client’s keep changing requirements. Very useful in agile methodologies. =\u003e Flexibility The open-closed principle also applies to plugin and middleware architecture. In that case, your base software entity is your application core functionality. In the case of plugins, you have a base or core module that can be plugged with new features \u0026 functionality through a common gateway interface. A good example of this is web browser extensions. Binary compatibility will also be in-tact in subsequent releases. Yardstick to Craft Open Closed Principle Friendly Software in C++ In the SRP, you make a judgement about decomposition and where to draw encapsulation boundaries in your code. In the OCP, you make a judgement about what in your module you will make abstract and leave to your module’s consumers to make concrete, and what concrete functionality to provide yourself. There are many design patterns that help us to extend code without changing it. For instance, the Decorator pattern helps us to follow Open Close principle. Also, the Factory Method, Strategy pattern or the Observer pattern might be used to design an application easy to change with minimum changes in the existing code. Conclusion Keep in mind that classes can never be completely closed. There will always be unforeseen changes which require a class to be modified. However, if changes can be foreseen, such as seen above i.e. filters, then you have a perfect opportunity to apply the OCP to be future-ready when those change requests come rolling in.\n","wordCount":"1470","inLanguage":"en","image":"https://vishalchovatiya.github.io/images/Open-Closed-Principle-in-C-SOLID-as-a-Rock-vishal-chovatiya.webp","datePublished":"2020-04-07T00:00:00Z","dateModified":"2020-04-07T00:00:00Z","author":{"@type":"Person","name":"Vishal Chovatiya"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://vishalchovatiya.github.io/posts/open-closed-principle-in-cpp-solid-as-a-rock/"},"publisher":{"@type":"Organization","name":"Vishal Chovatiya","logo":{"@type":"ImageObject","url":"https://vishalchovatiya.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://vishalchovatiya.github.io/ accesskey=h title="Vishal Chovatiya (Alt + H)"><img src=https://vishalchovatiya.github.io/apple-touch-icon.png alt aria-label=logo height=35>Vishal Chovatiya</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://vishalchovatiya.github.io/pages/vishal-chovatiya title="About Me"><span>About Me</span></a></li><li><a href=https://vishalchovatiya.github.io/pages/start-here title="Start Here"><span>Start Here</span></a></li><li><a href=https://vishalchovatiya.github.io/posts/ title=Latest><span>Latest</span></a></li><li><a href=https://vishalchovatiya.github.io/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://vishalchovatiya.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://vishalchovatiya.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Open Closed Principle in C++ | SOLID as a Rock</h1><div class=post-meta><span title='2020-04-07 00:00:00 +0000 UTC'>April 7, 2020</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1470 words&nbsp;·&nbsp;Vishal Chovatiya&nbsp;|&nbsp;<a href=https://github.com/vishalchovatiya/blog/vishalchovatiya/content/posts/open-closed-principle-in-cpp-solid-as-a-rock.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://vishalchovatiya.github.io/images/Open-Closed-Principle-in-C-SOLID-as-a-Rock-vishal-chovatiya.webp alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#intent>Intent</a></li><li><a href=#motivation-violating-the-open-closed-principle>Motivation: Violating the Open Closed Principle</a></li><li><a href=#solution-open-closed-principle-example-in-c>Solution: Open Closed Principle Example in C++</a><ul><li><a href=#adding-the-level-of-abstraction-for-extensibility>Adding the level of abstraction for extensibility</a></li><li><a href=#for-two-or-more-combined-specifications>For two or more combined specifications</a></li></ul></li><li><a href=#benefits-of-open-closed-principle>Benefits of Open Closed Principle</a><ul><li><a href=#-extensibility>=> Extensibility</a></li><li><a href=#-maintainability>=> Maintainability</a></li><li><a href=#-flexibility>=> Flexibility</a></li></ul></li><li><a href=#yardstick-to-craft-open-closed-principle-friendly-software-in-c>Yardstick to Craft Open Closed Principle Friendly Software in C++</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>This is the second part of a five-part article series about SOLID as Rock design principle. The SOLID design principles, when combined together, make it easy for a programmer to craft software that is easy to maintain, reuse & extend. <strong>O</strong>pen-<strong>C</strong>losed <strong>P</strong>rinciple(OCP) is the second principle in this series which I will discuss here with minimalistic example in <a href=/posts/21-new-features-of-modern-cpp-to-use-in-your-project/>Modern C++</a> along with its benefits & generic guideline.</p><p>By the way, If you haven&rsquo;t gone through my previous articles on design principles, then below is the quick links:</p><ol><li><a href=/posts//single-responsibility-principle-in-cpp-solid-as-a-rock/><strong>S</strong>RP – Single Responsibility Principle</a></li><li><a href=/posts//open-closed-principle-in-cpp-solid-as-a-rock/><strong>O</strong>CP – Open/Closed Principle</a></li><li><a href=/posts//liskovs-substitution-principle-in-cpp-solid-as-a-rock/><strong>L</strong>SP – Liskov Substitution Principle</a></li><li><a href=/posts//interface-segregation-principle-in-cpp-solid-as-a-rock/><strong>I</strong>SP – Interface Segregation Principle</a></li><li><a href=/posts//dependency-inversion-principle-in-cpp-solid-as-a-rock/><strong>D</strong>IP – Dependency Inversion Principle</a></li></ol><p>The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like <code>override</code>, <code>final</code>, <code>public</code>(while inheritance) just to make code compact & consumable(most of the time) in single standard screen size. I also prefer <code>struct</code> instead of <code>class</code> just to save line by not writing &ldquo;<code>public:</code>&rdquo; sometimes and also miss <a href=/posts//part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/>virtual destructor</a>, constructor, <a href=/posts//all-about-copy-constructor-in-cpp-with-example/>copy constructor</a>, prefix <code>std::</code>, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.</p><p><strong><em>Note:</em></strong></p><ul><li>If you stumbled here directly, then I would suggest you go through <a href=/posts//what-is-design-pattern/>What is design pattern?</a> first, even if it is trivial. I believe it will encourage you to explore more on this topic.</li><li>All of this code you encounter in this series of articles are compiled using C++20(though I have used <a href=/posts//21-new-features-of-modern-cpp-to-use-in-your-project/>Modern C++</a> features up to C++17 in most cases). So if you don&rsquo;t have access to the latest compiler you can use <a href=https://wandbox.org/>https://wandbox.org/</a> which has preinstalled boost library as well.</li></ul><h2 id=intent>Intent<a hidden class=anchor aria-hidden=true href=#intent>#</a></h2><blockquote><p><strong><em>classes should be open for extension, closed for modification</em></strong></p></blockquote><ul><li>This literally means you should be able to extend a classes behaviour, without modifying it. This might seems weird to you & may raise a question that how can you change the behaviour of a class without modifying it?</li><li>But there are many answers to this in <a href=/posts/memory-layout-of-cpp-object/>object-oriented design</a> like <a href=/posts/part-1-all-about-virtual-keyword-in-cpp-how-virtual-function-works-internally/>dynamic polymorphism</a>, <a href=/posts/7-advanced-cpp-concepts-idiom-examples-you-should-know/#CRTP>static polymorphism</a>, <a href=/posts/c-template-a-quick-uptodate-look/>C++ template</a>, etc.</li></ul><h2 id=motivation-violating-the-open-closed-principle>Motivation: Violating the Open Closed Principle<a hidden class=anchor aria-hidden=true href=#motivation-violating-the-open-closed-principle>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>enum</span> <span class=k>class</span> <span class=nc>COLOR</span> <span class=p>{</span> <span class=n>RED</span><span class=p>,</span> <span class=n>GREEN</span><span class=p>,</span> <span class=n>BLUE</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>enum</span> <span class=k>class</span> <span class=nc>SIZE</span> <span class=p>{</span> <span class=n>SMALL</span><span class=p>,</span> <span class=n>MEDIUM</span><span class=p>,</span> <span class=n>LARGE</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Product</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span>  <span class=n>m_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>COLOR</span>   <span class=n>m_color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SIZE</span>    <span class=n>m_size</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=n>Items</span> <span class=o>=</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>*&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#define ALL(C)  begin(C), end(C)
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>ProductFilter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=n>Items</span> <span class=nf>by_color</span><span class=p>(</span><span class=n>Items</span> <span class=n>items</span><span class=p>,</span> <span class=k>const</span> <span class=n>COLOR</span> <span class=n>e_color</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Items</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>i</span> <span class=p>:</span> <span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=o>-&gt;</span><span class=n>m_color</span> <span class=o>==</span> <span class=n>e_color</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=n>Items</span> <span class=nf>by_size</span><span class=p>(</span><span class=n>Items</span> <span class=n>items</span><span class=p>,</span> <span class=k>const</span> <span class=n>SIZE</span> <span class=n>e_size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Items</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>i</span> <span class=p>:</span> <span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=o>-&gt;</span><span class=n>m_size</span> <span class=o>==</span> <span class=n>e_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=n>Items</span> <span class=nf>by_size_and_color</span><span class=p>(</span><span class=n>Items</span> <span class=n>items</span><span class=p>,</span> <span class=k>const</span> <span class=n>SIZE</span> <span class=n>e_size</span><span class=p>,</span> <span class=k>const</span> <span class=n>COLOR</span> <span class=n>e_color</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Items</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>i</span> <span class=p>:</span> <span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=o>-&gt;</span><span class=n>m_size</span> <span class=o>==</span> <span class=n>e_size</span> <span class=o>&amp;&amp;</span> <span class=n>i</span><span class=o>-&gt;</span><span class=n>m_color</span> <span class=o>==</span> <span class=n>e_color</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Items</span> <span class=n>all</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Product</span><span class=p>{</span><span class=s>&#34;Apple&#34;</span><span class=p>,</span> <span class=n>COLOR</span><span class=o>::</span><span class=n>GREEN</span><span class=p>,</span> <span class=n>SIZE</span><span class=o>::</span><span class=n>SMALL</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Product</span><span class=p>{</span><span class=s>&#34;Tree&#34;</span><span class=p>,</span> <span class=n>COLOR</span><span class=o>::</span><span class=n>GREEN</span><span class=p>,</span> <span class=n>SIZE</span><span class=o>::</span><span class=n>LARGE</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Product</span><span class=p>{</span><span class=s>&#34;House&#34;</span><span class=p>,</span> <span class=n>COLOR</span><span class=o>::</span><span class=n>BLUE</span><span class=p>,</span> <span class=n>SIZE</span><span class=o>::</span><span class=n>LARGE</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>p</span> <span class=p>:</span> <span class=n>ProductFilter</span><span class=o>::</span><span class=n>by_color</span><span class=p>(</span><span class=n>all</span><span class=p>,</span> <span class=n>COLOR</span><span class=o>::</span><span class=n>GREEN</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>m_name</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; is green</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>p</span> <span class=p>:</span> <span class=n>ProductFilter</span><span class=o>::</span><span class=n>by_size_and_color</span><span class=p>(</span><span class=n>all</span><span class=p>,</span> <span class=n>SIZE</span><span class=o>::</span><span class=n>LARGE</span><span class=p>,</span> <span class=n>COLOR</span><span class=o>::</span><span class=n>GREEN</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>m_name</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; is green &amp; large</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Apple is green
</span></span></span><span class=line><span class=cl><span class=cm>Tree is green
</span></span></span><span class=line><span class=cl><span class=cm>Tree is green &amp; large
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></div><ul><li>So we have a bunch of products & we filtered it by some of its attributes. There is nothing wrong with the above code as far as the requirement is fixed(which will never be the case in software engineering).</li><li>But just imagine the situations: You already shipped the code to the client. Later on, requirement changes & some new filters are required. In this case, you again need to modify the class & add new filter methods.</li><li>This is a problematic approach because we have 2 attributes(i.e. color & size) & need to implement 3 function(i.e. color, size & its combination), one more attributes & need to implement 8 functions. You see where this is going.</li><li>You need to go again & again in the existing implemented code & have to modify it which may break other parts of code as well. This is not a scalable solution.</li><li>The open-closed principle states that your system should be open to extension but should be closed for modification. Unfortunately what we are doing here is modifying the existing code which is a violation of OCP.</li></ul><h2 id=solution-open-closed-principle-example-in-c>Solution: Open Closed Principle Example in C++<a hidden class=anchor aria-hidden=true href=#solution-open-closed-principle-example-in-c>#</a></h2><p>There is more than one way to achieve OCP. Here I am demonstrating the popular one i.e. interface design or abstraction level. So here is our scalable solution:</p><h3 id=adding-the-level-of-abstraction-for-extensibility>Adding the level of abstraction for extensibility<a hidden class=anchor aria-hidden=true href=#adding-the-level-of-abstraction-for-extensibility>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Specification</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Specification</span><span class=p>()</span> <span class=o>=</span> <span class=k>default</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>bool</span> <span class=nf>is_satisfied</span><span class=p>(</span><span class=n>T</span> <span class=o>*</span><span class=n>item</span><span class=p>)</span> <span class=k>const</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>ColorSpecification</span> <span class=o>:</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>COLOR</span> <span class=n>e_color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ColorSpecification</span><span class=p>(</span><span class=n>COLOR</span> <span class=n>e_color</span><span class=p>)</span> <span class=o>:</span> <span class=n>e_color</span><span class=p>(</span><span class=n>e_color</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>is_satisfied</span><span class=p>(</span><span class=n>Product</span> <span class=o>*</span><span class=n>item</span><span class=p>)</span> <span class=k>const</span> <span class=p>{</span> <span class=k>return</span> <span class=n>item</span><span class=o>-&gt;</span><span class=n>m_color</span> <span class=o>==</span> <span class=n>e_color</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>SizeSpecification</span> <span class=o>:</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>SIZE</span> <span class=n>e_size</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SizeSpecification</span><span class=p>(</span><span class=n>SIZE</span> <span class=n>e_size</span><span class=p>)</span> <span class=o>:</span> <span class=n>e_size</span><span class=p>(</span><span class=n>e_size</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>is_satisfied</span><span class=p>(</span><span class=n>Product</span> <span class=o>*</span><span class=n>item</span><span class=p>)</span> <span class=k>const</span> <span class=p>{</span> <span class=k>return</span> <span class=n>item</span><span class=o>-&gt;</span><span class=n>m_size</span> <span class=o>==</span> <span class=n>e_size</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Filter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>T</span> <span class=o>*&gt;</span> <span class=n>filter</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>T</span> <span class=o>*&gt;</span> <span class=n>items</span><span class=p>,</span> <span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>spec</span><span class=p>)</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>BetterFilter</span> <span class=o>:</span> <span class=n>Filter</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Product</span> <span class=o>*&gt;</span> <span class=n>filter</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Product</span> <span class=o>*&gt;</span> <span class=n>items</span><span class=p>,</span> <span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>spec</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>vector</span><span class=o>&lt;</span><span class=n>Product</span> <span class=o>*&gt;</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>p</span> <span class=p>:</span> <span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>spec</span><span class=p>.</span><span class=n>is_satisfied</span><span class=p>(</span><span class=n>p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>BetterFilter</span> <span class=n>bf</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>x</span> <span class=p>:</span> <span class=n>bf</span><span class=p>.</span><span class=n>filter</span><span class=p>(</span><span class=n>all</span><span class=p>,</span> <span class=n>ColorSpecification</span><span class=p>(</span><span class=n>COLOR</span><span class=o>::</span><span class=n>GREEN</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>x</span><span class=o>-&gt;</span><span class=n>m_name</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; is green</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span></code></pre></div><ul><li>As you can see we do not have to modify <code>filter</code> method of <code>BetterFilter</code>. It can work with all kind of <code>specification</code> now.</li></ul><h3 id=for-two-or-more-combined-specifications>For two or more combined specifications<a hidden class=anchor aria-hidden=true href=#for-two-or-more-combined-specifications>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>AndSpecification</span> <span class=o>:</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>second</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>AndSpecification</span><span class=p>(</span><span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>first</span><span class=p>,</span> <span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>:</span> <span class=n>first</span><span class=p>(</span><span class=n>first</span><span class=p>),</span> <span class=n>second</span><span class=p>(</span><span class=n>second</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>is_satisfied</span><span class=p>(</span><span class=n>T</span> <span class=o>*</span><span class=n>item</span><span class=p>)</span> <span class=k>const</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>first</span><span class=p>.</span><span class=n>is_satisfied</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=n>second</span><span class=p>.</span><span class=n>is_satisfied</span><span class=p>(</span><span class=n>item</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=n>AndSpecification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=k>operator</span><span class=o>&amp;&amp;</span><span class=p>(</span><span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>first</span><span class=p>,</span> <span class=k>const</span> <span class=n>Specification</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>second</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span><span class=n>first</span><span class=p>,</span> <span class=n>second</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -----------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>auto</span> <span class=n>green_things</span> <span class=o>=</span> <span class=n>ColorSpecification</span><span class=p>{</span><span class=n>COLOR</span><span class=o>::</span><span class=n>GREEN</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>auto</span> <span class=n>large_things</span> <span class=o>=</span> <span class=n>SizeSpecification</span><span class=p>{</span><span class=n>SIZE</span><span class=o>::</span><span class=n>LARGE</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>BetterFilter</span> <span class=n>bf</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>x</span> <span class=p>:</span> <span class=n>bf</span><span class=p>.</span><span class=n>filter</span><span class=p>(</span><span class=n>all</span><span class=p>,</span> <span class=n>green_things</span> <span class=o>&amp;&amp;</span> <span class=n>large_things</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>x</span><span class=o>-&gt;</span><span class=n>m_name</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; is green and large</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// warning: the following will compile but will NOT work
</span></span></span><span class=line><span class=cl><span class=c1>// auto spec2 = SizeSpecification{SIZE::LARGE} &amp;&amp;
</span></span></span><span class=line><span class=cl><span class=c1>//              ColorSpecification{COLOR::BLUE};
</span></span></span></code></pre></div><ul><li><code>SizeSpecification{SIZE::LARGE} && ColorSpecification{COLOR::BLUE}</code> will not work. Experienced C++ eyes can easily recognize the reason. Though temporary object creation is a hint here. If you do so, you may get the error of <a href=/posts/part-1-all-about-virtual-keyword-in-cpp-how-virtual-function-works-internally/>pure virtual function</a> as follows:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pure virtual method called
</span></span><span class=line><span class=cl>terminate called without an active exception
</span></span><span class=line><span class=cl>The terminal process terminated with <span class=nb>exit</span> code: <span class=m>3</span>
</span></span></code></pre></div><ul><li>For more than two specifications, you can use a variadic template.</li></ul><h2 id=benefits-of-open-closed-principle>Benefits of Open Closed Principle<a hidden class=anchor aria-hidden=true href=#benefits-of-open-closed-principle>#</a></h2><h3 id=-extensibility>=> Extensibility<a hidden class=anchor aria-hidden=true href=#-extensibility>#</a></h3><p>&ldquo;When a single change to a program results in a cascade of changes to dependent modules, that program exhibits the undesirable attributes that we have come to associate with &lsquo;bad&rsquo; design. The program becomes fragile, rigid, unpredictable and unreusable. The open-closed principle attacks this in a very straightforward way. It says that you should design modules that never change. When requirements change, you extend the behaviour of such modules by adding new code, not by changing old code that already works.&rdquo;<br>— <a href=https://en.wikipedia.org/wiki/Robert_C._Martin>Robert Martin</a></p><h3 id=-maintainability>=> Maintainability<a hidden class=anchor aria-hidden=true href=#-maintainability>#</a></h3><ul><li>The main benefit of this approach is that an interface introduces an additional level of abstraction which enables loose coupling. The implementations of an interface are independent of each other and don’t need to share any code.</li><li>Thus, you can easily cope-up with client&rsquo;s keep changing requirements. Very useful in agile methodologies.</li></ul><h3 id=-flexibility>=> Flexibility<a hidden class=anchor aria-hidden=true href=#-flexibility>#</a></h3><ul><li>The open-closed principle also applies to plugin and middleware architecture. In that case, your base software entity is your application core functionality.</li><li>In the case of plugins, you have a base or core module that can be plugged with new features & functionality through a common gateway interface. A good example of this is web browser extensions.</li><li>Binary compatibility will also be in-tact in subsequent releases.</li></ul><h2 id=yardstick-to-craft-open-closed-principle-friendly-software-in-c>Yardstick to Craft Open Closed Principle Friendly Software in C++<a hidden class=anchor aria-hidden=true href=#yardstick-to-craft-open-closed-principle-friendly-software-in-c>#</a></h2><ul><li>In the SRP, you make a judgement about decomposition and where to draw encapsulation boundaries in your code. In the OCP, you make a judgement about what in your module you will make abstract and leave to your module’s consumers to make concrete, and what concrete functionality to provide yourself.</li><li>There are many design patterns that help us to extend code without changing it. For instance, the <a href=/posts/decorator-design-pattern-in-modern-cpp/>Decorator pattern</a> helps us to follow Open Close principle. Also, the <a href=/posts/factory-design-pattern-in-modern-cpp/>Factory Method</a>, <a href=/posts/strategy-design-pattern-in-modern-cpp/>Strategy pattern</a> or the <a href=/posts/observer-design-pattern-in-modern-cpp/>Observer pattern</a> might be used to design an application easy to change with minimum changes in the existing code.</li></ul><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Keep in mind that classes can never be completely closed. There will always be unforeseen changes which require a class to be modified. However, if changes can be foreseen, such as seen above i.e. <code>filters</code>, then you have a perfect opportunity to apply the OCP to be future-ready when those change requests come rolling in.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://vishalchovatiya.github.io/tags/ciple-extensibility1/>Ciple-Extensibility1</a></li><li><a href=https://vishalchovatiya.github.io/tags/flexibility1/>Flexibility1</a></li><li><a href=https://vishalchovatiya.github.io/tags/intent-open-closed-principle1/>Intent-Open-Closed-Principle1</a></li><li><a href=https://vishalchovatiya.github.io/tags/ion-for-extensibility-benefits-of-open-closed-prin1/>Ion-for-Extensibility-Benefits-of-Open-Closed-Prin1</a></li><li><a href=https://vishalchovatiya.github.io/tags/le-example-in-c-adding-the-level-of-abstract1/>Le-Example-in-C-Adding-the-Level-of-Abstract1</a></li><li><a href=https://vishalchovatiya.github.io/tags/le-open-closed-principle-code-e1/>Le-Open-Closed-Principle-Code-E1</a></li><li><a href=https://vishalchovatiya.github.io/tags/maintainability1/>Maintainability1</a></li><li><a href=https://vishalchovatiya.github.io/tags/motivation-violating-the-ope1/>Motivation-Violating-the-Ope1</a></li><li><a href=https://vishalchovatiya.github.io/tags/n-closed-principle-solution-open-closed-princip1/>N-Closed-Principle-Solution-Open-Closed-Princip1</a></li><li><a href=https://vishalchovatiya.github.io/tags/open-closed-principle-c1/>Open-Closed-Principle-C1</a></li><li><a href=https://vishalchovatiya.github.io/tags/open-closed-principle-in-c1/>Open-Closed-Principle-in-C1</a></li><li><a href=https://vishalchovatiya.github.io/tags/open-closed-principle-in-cpp1/>Open-Closed-Principle-in-Cpp1</a></li><li><a href=https://vishalchovatiya.github.io/tags/software-open-closed-princip1/>Software-Open-Closed-Princip1</a></li><li><a href=https://vishalchovatiya.github.io/tags/xamples-open-closed-principle-in-c1/>Xamples-Open-Closed-Principle-in-C1</a></li><li><a href=https://vishalchovatiya.github.io/tags/yardstick-to-craft-open-closed-principle-friendly-software-in-c/>Yardstick-to-Craft-Open-Closed-Principle-Friendly-Software-in-C</a></li></ul><nav class=paginav><a class=prev href=https://vishalchovatiya.github.io/posts/liskovs-substitution-principle-in-cpp-solid-as-a-rock/><span class=title>« Prev</span><br><span>Liskov's Substitution Principle in C++ | SOLID as a Rock</span>
</a><a class=next href=https://vishalchovatiya.github.io/posts/single-responsibility-principle-in-cpp-solid-as-a-rock/><span class=title>Next »</span><br><span>Single Responsibility Principle in C++ | SOLID as a Rock</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on x" href="https://x.com/intent/tweet/?text=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock&amp;url=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f&amp;hashtags=ciple-extensibility1%2cflexibility1%2cintent-open-closed-principle1%2cion-for-extensibility-benefits-of-open-closed-prin1%2cle-example-in-c-adding-the-level-of-abstract1%2cle-open-closed-principle-code-e1%2cmaintainability1%2cmotivation-violating-the-ope1%2cn-closed-principle-solution-open-closed-princip1%2copen-closed-principle-c1%2copen-closed-principle-in-c1%2copen-closed-principle-in-cpp1%2csoftware-open-closed-princip1%2cxamples-open-closed-principle-in-c1%2cyardstick-to-craft-open-closed-principle-friendly-software-in-c"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f&amp;title=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock&amp;summary=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock&amp;source=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f&title=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on whatsapp" href="https://api.whatsapp.com/send?text=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock%20-%20https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on telegram" href="https://telegram.me/share/url?text=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock&amp;url=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Open Closed Principle in C++ | SOLID as a Rock on ycombinator" href="https://news.ycombinator.com/submitlink?t=Open%20Closed%20Principle%20in%20C%2b%2b%20%7c%20SOLID%20as%20a%20Rock&u=https%3a%2f%2fvishalchovatiya.github.io%2fposts%2fopen-closed-principle-in-cpp-solid-as-a-rock%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://vishalchovatiya.github.io/>Vishal Chovatiya</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>