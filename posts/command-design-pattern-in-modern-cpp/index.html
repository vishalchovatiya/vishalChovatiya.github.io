<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Command Design Pattern in Modern C&#43;&#43; · Vishal Chovatiya
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Vishal Chovatiya">
<meta name="description" content="In software engineering, Behavioural Design Patterns deal with the assignment of responsibilities between objects which in turn make the interaction between the objects easy &amp; loosely coupled. In this article of the Behavioural Design Patterns, we&rsquo;re going to take a look at Command Design Pattern in Modern C&#43;&#43; which encapsulate all the details related to operation into a separate object. Command Design Pattern is widely used in sophisticated software. In fact, you might be using it every day without even knowing that.">
<meta name="keywords" content="blog,developer,personal">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Command Design Pattern in Modern C&#43;&#43;">
  <meta name="twitter:description" content="In software engineering, Behavioural Design Patterns deal with the assignment of responsibilities between objects which in turn make the interaction between the objects easy &amp; loosely coupled. In this article of the Behavioural Design Patterns, we’re going to take a look at Command Design Pattern in Modern C&#43;&#43; which encapsulate all the details related to operation into a separate object. Command Design Pattern is widely used in sophisticated software. In fact, you might be using it every day without even knowing that.">

<meta property="og:url" content="http://localhost:1313/posts/command-design-pattern-in-modern-cpp/">
  <meta property="og:site_name" content="Vishal Chovatiya">
  <meta property="og:title" content="Command Design Pattern in Modern C&#43;&#43;">
  <meta property="og:description" content="In software engineering, Behavioural Design Patterns deal with the assignment of responsibilities between objects which in turn make the interaction between the objects easy &amp; loosely coupled. In this article of the Behavioural Design Patterns, we’re going to take a look at Command Design Pattern in Modern C&#43;&#43; which encapsulate all the details related to operation into a separate object. Command Design Pattern is widely used in sophisticated software. In fact, you might be using it every day without even knowing that.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-04-03T00:00:00+00:00">
    <meta property="article:modified_time" content="2020-04-03T00:00:00+00:00">




<link rel="canonical" href="http://localhost:1313/posts/command-design-pattern-in-modern-cpp/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Vishal Chovatiya
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Latest</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/pages/start-here">Start Here</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/cpp/">C/C&#43;&#43;</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/linux-system-programming/">Linux System Programming</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/misc/">Misc</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/command-design-pattern-in-modern-cpp/">
              Command Design Pattern in Modern C&#43;&#43;
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2020-04-03T00:00:00Z">
                April 3, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              7-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/cpp/">Cpp</a>
      <span class="separator">•</span>
    <a href="/categories/design-patterns/">Design-Patterns</a>
      <span class="separator">•</span>
    <a href="/categories/software-engineering/">Software-Engineering</a></div>

          
        </div>
      </header>

      <div class="post-content">
        
          <img src="/images/Command-Design-Pattern-in-Modern-C-vishal-chovatiya.png" alt="Featured image"/>
        
        <p>In software engineering, Behavioural Design Patterns deal with the assignment of responsibilities between objects which in turn make the interaction between the objects easy &amp; loosely coupled. In this article of the Behavioural Design Patterns, we&rsquo;re going to take a look at Command Design Pattern in Modern C++ which <strong><em>encapsulate all the details related to operation into a separate object</em></strong>. Command Design Pattern is widely used in sophisticated software. In fact, you might be using it every day without even knowing that. For example, whenever you press <code>Ctrl + Z</code>(i.e. undo/redo), you are likely firing the object arrangements organised as a Command Pattern.</p>
<p>By the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:</p>
<ol>
<li><a href="/posts//chain-of-responsibility-design-pattern-in-modern-cpp/" >Chain of responsibility</a></li>
<li><a href="/posts//command-design-pattern-in-modern-cpp/" >Command</a></li>
<li><a href="/posts//interpreter-design-pattern-in-modern-cpp/" >Interpreter</a></li>
<li><a href="/posts//iterator-design-pattern-in-modern-cpp/" >Iterator</a></li>
<li><a href="/posts//mediator-design-pattern-in-modern-cpp/" >Mediator</a></li>
<li><a href="/posts//memento-design-pattern-in-modern-cpp/" >Memento</a></li>
<li><a href="/posts//observer-design-pattern-in-modern-cpp/" >Observer</a></li>
<li><a href="/posts//state-design-pattern-in-modern-cpp/" >State</a></li>
<li><a href="/posts//strategy-design-pattern-in-modern-cpp/" >Strategy</a></li>
<li><a href="/posts//template-method-design-pattern-in-modern-cpp/" >Template Method</a></li>
<li><a href="/posts//double-dispatch-visitor-design-pattern-in-modern-cpp/" >Visitor</a></li>
</ol>
<p>The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like <code>override</code>, <code>final</code>, <code>public</code>(while inheritance) just to make code compact &amp; consumable(most of the time) in single standard screen size. I also prefer <code>struct</code> instead of <code>class</code> just to save line by not writing &ldquo;<code>public:</code>&rdquo; sometimes and also miss <a href="/posts//part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/" >virtual destructor</a>, constructor, <a href="/posts//all-about-copy-constructor-in-cpp-with-example/" >copy constructor</a>, prefix <code>std::</code>, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.</p>
<p><strong><em>Note:</em></strong></p>
<ul>
<li>If you stumbled here directly, then I would suggest you go through <a href="/posts//what-is-design-pattern/" >What is design pattern?</a> first, even if it is trivial. I believe it will encourage you to explore more on this topic.</li>
<li>All of this code you encounter in this series of articles are compiled using C++20(though I have used <a href="/posts//21-new-features-of-modern-cpp-to-use-in-your-project/" >Modern C++</a> features up to C++17 in most cases). So if you don&rsquo;t have access to the latest compiler you can use <a href="https://wandbox.org/"  class="external-link" target="_blank" rel="noopener">https://wandbox.org/</a> which has preinstalled boost library as well.</li>
</ul>
<h2 id="intent">
  Intent
  <a class="heading-link" href="#intent">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<blockquote>
<p><strong><em>To decouples the sender &amp; receiver by creating a separate object for a set of operations.</em></strong></p>
</blockquote>
<ul>
<li>The Command Design Pattern is quite simply an <a href="/posts/inside-the-cpp-object-model/" >object</a> to represent instructions or set of instructions which also facilitates the support of undo-able operations &amp; query/request customization.</li>
<li>There is one thing that I want to mention which isn&rsquo;t directly related to the subject of the Command Design Pattern. But still, let me clarify that Command &amp; Query are two different aspects.
<ul>
<li>Command: Asking for action or change e.g. renaming a file.</li>
<li>Query: Asking for information(doesn&rsquo;t cause any mutation) e.g. list all the file in the current directory.</li>
</ul>
</li>
<li>So, this idea of <a href="https://en.wikipedia.org/wiki/Command%E2%80%93query_separation"  class="external-link" target="_blank" rel="noopener">command query separation</a> is something that used in a lot of things like distributed databases for example. Where you basically split your system into separate components and separate means of sending commands. I just wants to make this point so that you don&rsquo;t get confuse later on. Because GoF mentions command &amp; query as the same thing.</li>
</ul>
<h2 id="trivial-command-design-pattern-example-in-c">
  Trivial Command Design Pattern Example in C++
  <a class="heading-link" href="#trivial-command-design-pattern-example-in-c">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">walk</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">operator</span>()() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;walk&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">jog</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">operator</span>()() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;jog&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">run</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">operator</span>()() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;run&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">macroCommand</span> <span style="color:#f92672">:</span> vector<span style="color:#f92672">&lt;</span>function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">operator</span>()() { 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span> <span style="color:#f92672">&amp;&amp;</span>f : <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>) 
</span></span><span style="display:flex;"><span>            f();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doIt</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> f) {
</span></span><span style="display:flex;"><span>    f();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    doIt(walk{});
</span></span><span style="display:flex;"><span>    doIt(jog{});
</span></span><span style="display:flex;"><span>    doIt(run{});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    macroCommand cardio_workout;
</span></span><span style="display:flex;"><span>    cardio_workout.push_back(walk{});
</span></span><span style="display:flex;"><span>    cardio_workout.push_back(jog{});
</span></span><span style="display:flex;"><span>    cardio_workout.push_back(run{});
</span></span><span style="display:flex;"><span>    cardio_workout();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> EXIT_SUCCESS;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>I know its silly example with overloaded call operator(i.e functor), but consider it a good start especially for <code>macroCommand</code>.</li>
</ul>
<h2 id="practical-approach-to-command-design-pattern">
  Practical Approach to Command Design Pattern
  <a class="heading-link" href="#practical-approach-to-command-design-pattern">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>Following is a practical example of the Command Design Pattern with a very familiar scenario of bank account:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">BankAccount</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int32_t</span>     m_balance;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deposit</span>(<span style="color:#66d9ef">int32_t</span> amount) { m_balance <span style="color:#f92672">+=</span> amount; }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">withdraw</span>(<span style="color:#66d9ef">int32_t</span> amount) { m_balance <span style="color:#f92672">-=</span> amount; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Command</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">execute</span>() <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">BankAccountCommand</span> <span style="color:#f92672">:</span> Command {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Action</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">bool</span> { deposit, withdraw };
</span></span><span style="display:flex;"><span>    BankAccount<span style="color:#f92672">&amp;</span>      m_ac;
</span></span><span style="display:flex;"><span>    Action            m_action;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int32_t</span>           m_amount;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    BankAccountCommand(BankAccount<span style="color:#f92672">&amp;</span> ac, Action a, <span style="color:#66d9ef">int32_t</span> amnt)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">:</span> m_ac(ac), m_action(a), m_amount(amnt) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">execute</span>() {
</span></span><span style="display:flex;"><span>        (m_action <span style="color:#f92672">==</span> Action<span style="color:#f92672">::</span>deposit) <span style="color:#f92672">?</span> m_ac.deposit(m_amount) <span style="color:#f92672">:</span> m_ac.withdraw(m_amount);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    BankAccount ba1{<span style="color:#ae81ff">1000</span>};
</span></span><span style="display:flex;"><span>    BankAccount ba2{<span style="color:#ae81ff">1000</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>BankAccountCommand<span style="color:#f92672">&gt;</span> commands{
</span></span><span style="display:flex;"><span>        BankAccountCommand{ba1, BankAccountCommand<span style="color:#f92672">::</span>Action<span style="color:#f92672">::</span>withdraw, <span style="color:#ae81ff">200</span>},
</span></span><span style="display:flex;"><span>        BankAccountCommand{ba2, BankAccountCommand<span style="color:#f92672">::</span>Action<span style="color:#f92672">::</span>deposit, <span style="color:#ae81ff">200</span>}
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> cmd : commands)
</span></span><span style="display:flex;"><span>        cmd.execute();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> ba1.m_balance <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> ba2.m_balance <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> EXIT_SUCCESS;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>As you can see <code>BankAccount</code> class with minimalistic implementation having some amount of starting balance. We do also have <code>deposit()</code> &amp; <code>withdraw()</code>methods but rather than using those methods directly we will create a separate entity <code>BankAccountCommand</code> backed by abstract class <code>Command</code>.</li>
<li>And in the <code>main()</code>, we have carried out the money transfer of <code>200</code> from one bank account to another. Each command has reference to particular <code>BankAccount</code> so it knows on which account to operate on.</li>
<li>So this idea of keeping every single command that invokes on a bank account gives us interesting possibilities.
<ol>
<li>One of those possibilities is to implement undo(as you find in Microsoft office applications by pressing <code>Ctrl + Z</code>) functionality so when you want to roll back one of these commands you can actually get it done easily.</li>
<li>Another possibility is you can create code more abstract in a way which works like a recorded macro. Think about the implementation of macros in a Microsoft Office application for example. That is a sequence of commands that gets recorded one after another. And you can sort of playback all the commands one after another. And you can also undo them all in reverse order with a single invocation.</li>
</ol>
</li>
<li>Following is an improved example incorporating above two possibilities with Composite Design Pattern:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">BankAccount</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int32_t</span>       m_balance;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deposit</span>(<span style="color:#66d9ef">int32_t</span> amount) { m_balance <span style="color:#f92672">+=</span> amount; }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">withdraw</span>(<span style="color:#66d9ef">int32_t</span> amount) { m_balance <span style="color:#f92672">-=</span> amount; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Command</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">execute</span>() <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">undo</span>() <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">BankAccountCommand</span> <span style="color:#f92672">:</span> Command {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Action</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">bool</span> { deposit, withdraw };
</span></span><span style="display:flex;"><span>    BankAccount<span style="color:#f92672">&amp;</span>      m_ac;
</span></span><span style="display:flex;"><span>    Action            m_cmd;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int32_t</span>           m_amount;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    BankAccountCommand(BankAccount<span style="color:#f92672">&amp;</span> ac, Action a, <span style="color:#66d9ef">int32_t</span> amnt) <span style="color:#f92672">:</span> m_ac(ac), m_cmd(a), m_amount(amnt) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">execute</span>() {
</span></span><span style="display:flex;"><span>        (m_cmd <span style="color:#f92672">==</span> Action<span style="color:#f92672">::</span>deposit) <span style="color:#f92672">?</span> m_ac.deposit(m_amount) <span style="color:#f92672">:</span> m_ac.withdraw(m_amount);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">undo</span>() {
</span></span><span style="display:flex;"><span>        (m_cmd <span style="color:#f92672">==</span> Action<span style="color:#f92672">::</span>deposit) <span style="color:#f92672">?</span> m_ac.withdraw(m_amount) <span style="color:#f92672">:</span> m_ac.deposit(m_amount);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">CompositeBankAccountCommand</span> <span style="color:#f92672">:</span> vector<span style="color:#f92672">&lt;</span>BankAccountCommand<span style="color:#f92672">&gt;</span>, Command
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    CompositeBankAccountCommand(<span style="color:#66d9ef">const</span> initializer_list<span style="color:#f92672">&lt;</span>value_type<span style="color:#f92672">&gt;&amp;</span> items)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">:</span> vector<span style="color:#f92672">&lt;</span>BankAccountCommand<span style="color:#f92672">&gt;</span>(items) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">execute</span>() { 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> cmd : <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>) 
</span></span><span style="display:flex;"><span>            cmd.execute(); 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">undo</span>() { 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> cmd : <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>) 
</span></span><span style="display:flex;"><span>            cmd.undo(); 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    BankAccount ba1{<span style="color:#ae81ff">1000</span>};
</span></span><span style="display:flex;"><span>    BankAccount ba2{<span style="color:#ae81ff">1000</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    CompositeBankAccountCommand commands{
</span></span><span style="display:flex;"><span>        BankAccountCommand{ba1, BankAccountCommand<span style="color:#f92672">::</span>Action<span style="color:#f92672">::</span>withdraw, <span style="color:#ae81ff">200</span>},
</span></span><span style="display:flex;"><span>        BankAccountCommand{ba2, BankAccountCommand<span style="color:#f92672">::</span>Action<span style="color:#f92672">::</span>deposit, <span style="color:#ae81ff">200</span>}
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    commands.execute();
</span></span><span style="display:flex;"><span>    commands.undo();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> ba1.m_balance <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> ba2.m_balance <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> EXIT_SUCCESS;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="benefits-of-command-design-pattern">
  Benefits of Command Design Pattern
  <a class="heading-link" href="#benefits-of-command-design-pattern">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ol>
<li>Command Design Pattern decouples operand &amp; operation. Thus facilitates extensions to add a new command is easy and without changing the existing code.</li>
<li>By queueing commands, you can also define a rollback functionality in the system as we did above.</li>
<li>It also allows us to create a macro with a bunch of commands can fire together in a single invocation.</li>
<li>As the Command Design Pattern has a separate structure to store a set of operations, we have the leverage to schedule it.</li>
</ol>
<h2 id="summary-by-faqs">
  Summary by FAQs
  <a class="heading-link" href="#summary-by-faqs">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p><strong>What is the important aspect of the Command Design Pattern?</strong></p>
<p>1. Interface separation: the invoker is isolated from the receiver.<br>
2. Time separation: stores a ready-to-go set of instructions that can be scheduled.</p>
<p><strong>What is the reason behind using the Command Design Pattern?</strong></p>
<ul>
<li>Decouple the sender &amp; receiver of the command</li>
<li>Implement the callback mechanism</li>
<li>Implement undo and redo functionality</li>
<li>Maintain a history of commands</li>
</ul>
<p><strong>Difference between Command &amp; Memento Design Pattern?</strong></p>
<p>Command Design Pattern represents request token<br>
Memento Design Pattern represents the internal state of an <a href="/posts/inside-the-cpp-object-model/" >object</a> at a particular time<br>
Polymorphism is important to Command, but not to Memento.</p>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
     Vishal Chovatiya 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
