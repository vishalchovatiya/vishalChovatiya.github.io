<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Factory Design Pattern in Modern C++ | Vishal Chovatiya</title>
<meta name=keywords content="abstract-factory,abstract-factory-c,abstract-factory-c-example,abstract-factory-design-pattern,abstract-factory-design-pattern-c,abstract-factory-in-c,abstract-factory-pattern-c,abstract-factory-pattern-c-example,benefits-of-factory-design-pattern,c-abstract-factory,c-abstract-factory-pattern,c-design-pattern-factory,c-factory-method,c-factory-pattern,c-factory-pattern-example,c-factory-pattern-template,classical-factory-design-pattern,design-pattern-factory-c,example-of-abstract-factory-design-pattern,factory-design-pattern-c,factory-design-pattern-c-example,factory-design-pattern-cpp,factory-design-pattern-example-in-c,factory-design-pattern-examples-in-c,factory-design-pattern-in-c,factory-design-pattern-in-c-with-example,factory-design-pattern-in-cpp,factory-design-pattern-in-modern-c,factory-design-pattern-intent,factory-method-c,factory-method-design-pattern-c,factory-method-design-pattern-in-c,factory-method-in-c,factory-method-pattern-c,factory-pattern-c-2,factory-pattern-c-example,factory-pattern-in-c,functional-factory-design-pattern-using-modern-c,inner-factory,motivation-for-factory-design-pattern,what-is-the-correct-way-to-implement-the-factory-design-pattern-in-c,when-to-use-the-factory-design-pattern,why-do-we-need-an-abstract-factory"><meta name=description content="In software engineering, Creational Design Patterns deal with object creation mechanisms, i.e. try to create objects in a manner suitable to the situation. In addition to this basic or ordinary form of object creation could result in design problems or added complexity to the design. Factory Design Pattern in C++ helps to mitigate this issue by creating objects using separate methods or polymorphic classes.
By the way, If you haven’t check out my other articles on Creational Design Patterns, then here is the list:"><meta name=author content="Vishal Chovatiya"><link rel=canonical href=http://localhost:1313/posts/factory-design-pattern-in-modern-cpp/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/trident_favicon.webp><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/images/trident_favicon.webp><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/images/trident_favicon.webp><link rel=apple-touch-icon href=http://localhost:1313/images/trident_favicon.webp><link rel=mask-icon href=http://localhost:1313/images/trident_favicon.webp><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/factory-design-pattern-in-modern-cpp/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Factory Design Pattern in Modern C++"><meta property="og:description" content="In software engineering, Creational Design Patterns deal with object creation mechanisms, i.e. try to create objects in a manner suitable to the situation. In addition to this basic or ordinary form of object creation could result in design problems or added complexity to the design. Factory Design Pattern in C++ helps to mitigate this issue by creating objects using separate methods or polymorphic classes.
By the way, If you haven’t check out my other articles on Creational Design Patterns, then here is the list:"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/factory-design-pattern-in-modern-cpp/"><meta property="og:image" content="http://localhost:1313/images/Factory-Design-Pattern-in-Modern-C-vishal-chovatiya.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-06T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-06T00:00:00+00:00"><meta property="og:site_name" content="Vishal Chovatiya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/Factory-Design-Pattern-in-Modern-C-vishal-chovatiya.webp"><meta name=twitter:title content="Factory Design Pattern in Modern C++"><meta name=twitter:description content="In software engineering, Creational Design Patterns deal with object creation mechanisms, i.e. try to create objects in a manner suitable to the situation. In addition to this basic or ordinary form of object creation could result in design problems or added complexity to the design. Factory Design Pattern in C++ helps to mitigate this issue by creating objects using separate methods or polymorphic classes.
By the way, If you haven’t check out my other articles on Creational Design Patterns, then here is the list:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Factory Design Pattern in Modern C++","item":"http://localhost:1313/posts/factory-design-pattern-in-modern-cpp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Factory Design Pattern in Modern C++","name":"Factory Design Pattern in Modern C\u002b\u002b","description":"In software engineering, Creational Design Patterns deal with object creation mechanisms, i.e. try to create objects in a manner suitable to the situation. In addition to this basic or ordinary form of object creation could result in design problems or added complexity to the design. Factory Design Pattern in C++ helps to mitigate this issue by creating objects using separate methods or polymorphic classes.\nBy the way, If you haven’t check out my other articles on Creational Design Patterns, then here is the list:","keywords":["abstract-factory","abstract-factory-c","abstract-factory-c-example","abstract-factory-design-pattern","abstract-factory-design-pattern-c","abstract-factory-in-c","abstract-factory-pattern-c","abstract-factory-pattern-c-example","benefits-of-factory-design-pattern","c-abstract-factory","c-abstract-factory-pattern","c-design-pattern-factory","c-factory-method","c-factory-pattern","c-factory-pattern-example","c-factory-pattern-template","classical-factory-design-pattern","design-pattern-factory-c","example-of-abstract-factory-design-pattern","factory-design-pattern-c","factory-design-pattern-c-example","factory-design-pattern-cpp","factory-design-pattern-example-in-c","factory-design-pattern-examples-in-c","factory-design-pattern-in-c","factory-design-pattern-in-c-with-example","factory-design-pattern-in-cpp","factory-design-pattern-in-modern-c","factory-design-pattern-intent","factory-method-c","factory-method-design-pattern-c","factory-method-design-pattern-in-c","factory-method-in-c","factory-method-pattern-c","factory-pattern-c-2","factory-pattern-c-example","factory-pattern-in-c","functional-factory-design-pattern-using-modern-c","inner-factory","motivation-for-factory-design-pattern","what-is-the-correct-way-to-implement-the-factory-design-pattern-in-c","when-to-use-the-factory-design-pattern","why-do-we-need-an-abstract-factory"],"articleBody":"In software engineering, Creational Design Patterns deal with object creation mechanisms, i.e. try to create objects in a manner suitable to the situation. In addition to this basic or ordinary form of object creation could result in design problems or added complexity to the design. Factory Design Pattern in C++ helps to mitigate this issue by creating objects using separate methods or polymorphic classes.\nBy the way, If you haven’t check out my other articles on Creational Design Patterns, then here is the list:\nFactory Builder Prototype Singleton The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like override, final, public(while inheritance) just to make code compact \u0026 consumable(most of the time) in single standard screen size. I also prefer struct instead of class just to save line by not writing “public:” sometimes and also miss virtual destructor, constructor, copy constructor, prefix std::, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.\nNote:\nIf you stumbled here directly, then I would suggest you go through What is design pattern? first, even if it is trivial. I believe it will encourage you to explore more on this topic. All of this code you encounter in this series of articles are compiled using C++20(though I have used Modern C++ features up to C++17 in most cases). So if you don’t have access to the latest compiler you can use https://wandbox.org/ which has preinstalled boost library as well. Intent For the creation of wholesale objects unlike builder(which creates piecewise).\nMotivation Let say you have a Point class having x \u0026 y as co-ordinates which can be Cartesian or Polar coordinate as below: 1 2 3 4 5 6 7 8 struct Point { Point(float x, float y){ /*...*/ } // Cartesian co-ordinates // Not OK: Cannot overload with same type of arguments // Point(float a, float b){ /*...*/ } // Polar co-ordinates // ... Implementation }; This isn’t possible as you might know you can not create two constructors with the same type of arguments. Other way around is: 1 2 3 4 5 6 7 8 9 10 11 12 13 enum class PointType{ cartesian, polar }; class Point { Point(float a, float b, PointTypetype = PointType::cartesian) { if (type == PointType::cartesian) { x = a; b = y; } else { x = a * cos(b); y = a * sin(b); } } }; But this isn’t a sophisticated way of doing this. Rather we should delegate separate instantiation to separate methods. Factory Design Pattern Examples in C++ So as you can guess. We are going to mitigate constructor limitation by moving the initialization process from constructor to other structure. And we gonna be using the Factory Method for that. And just as the name suggests it uses the method or member function to initialize the object. Factory Method 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 enum class PointType { cartesian, polar }; class Point { float m_x; float m_y; PointType m_type; // Private constructor, so that object can't be created directly Point(const float x, const float y, PointType t) : m_x{x}, m_y{y}, m_type{t} {} public: friend ostream \u0026operator\u003c\u003c(ostream \u0026os, const Point \u0026obj) { return os \u003c\u003c \"x: \" \u003c\u003c obj.m_x \u003c\u003c \" y: \" \u003c\u003c obj.m_y; } static Point NewCartesian(float x, float y) { return {x, y, PointType::cartesian}; } static Point NewPolar(float a, float b) { return {a * cos(b), a * sin(b), PointType::polar}; } }; int main() { // Point p{ 1,2 }; // will not work auto p = Point::NewPolar(5, M_PI_4); cout \u003c\u003c p \u003c\u003c endl; // x: 3.53553 y: 3.53553 return EXIT_SUCCESS; } As you can observe from the implementation. It actually disallows the use of constructor \u0026 forcing users to use static methods instead. And this is the essence of the Factory Method i.e. private constructor \u0026 static method. Classical Factory Design Pattern If you have dedicated code for construction then why don’t we move it to a dedicated class! And Just to separation the concerns i.e. Single Responsibility Principle from SOLID design principles. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Point { // ... as it is from above friend class PointFactory; }; class PointFactory { public: static Point NewCartesian(float x, float y) { return { x, y }; } static Point NewPolar(float r, float theta) { return { r*cos(theta), r*sin(theta) }; } }; Mind that this is not the abstract factory this is a concrete factory. Making the PointFactory friend class of Point we have violated the Open-Closed Principle(OCP). As friend keyword itself contrary to OCP. Inner Factory There is a critical thing we missed in our Factory that there is no strong link between PointFactory \u0026 Point which confuses user to use Point just by seeing everything is private. So rather than designing a factory outside the class. We can simply put it in the class which encourage users to use Factory. Thus, we also serve the second problem which is breaking the Open-Closed Principle. And this will be somewhat more intuitive for the user to use Factory. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Point { float m_x; float m_y; Point(float x, float y) : m_x(x), m_y(y) {} public: struct Factory { static Point NewCartesian(float x, float y) { return { x,y }; } static Point NewPolar(float r, float theta) { return{ r*cos(theta), r*sin(theta) }; } }; }; int main() { auto p = Point::Factory::NewCartesian(2, 3); return EXIT_SUCCESS; } Abstract Factory Why do we need an Abstract Factory? C++ has the support of polymorphic object destruction using it’s base class’s virtual destructor. Similarly, equivalent support for creation \u0026 copying of objects is missing as C++ doesn’t support virtual constructor \u0026 virtual copy constructors. Moreover, you can’t create an object unless you know its static type, because the compiler must know the amount of space it needs to allocate. For the same reason, copy of an object also requires its type to known at compile-time. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 struct Point { virtual ~Point(){ cout\u003c\u003c\"~Point\\n\"; } }; struct Point2D : Point { ~Point2D(){ cout\u003c\u003c\"~Point2D\\n\"; } }; struct Point3D : Point { ~Point3D(){ cout\u003c\u003c\"~Point3D\\n\"; } }; void who_am_i(Point *who) { // Not sure whether Point2D would be passed here or Point3D // How to `create` the object of same type i.e. pointed by who ? // How to `copy` object of same type i.e. pointed by who ? delete who; // you can delete object pointed by who, thanks to virtual destructor } Example of Abstract Factory Design Pattern The Abstract Factory is useful in a situation that requires the creation of many different types of objects, all derived from a common base type. The Abstract Factory defines a method for creating the objects, which subclasses can then override to specify the derived type that will be created. Thus, at run time, the appropriate Abstract Factory Method will be called depending upon the type of object referenced/pointed \u0026 return a base class pointer to a new instance of that object. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 struct Point { virtual ~Point() = default; virtual unique_ptr\u003cPoint\u003e create() = 0; virtual unique_ptr\u003cPoint\u003e clone()\t= 0; }; struct Point2D : Point { unique_ptr\u003cPoint\u003e create() { return make_unique\u003cPoint2D\u003e(); } unique_ptr\u003cPoint\u003e clone() { return make_unique\u003cPoint2D\u003e(*this); } }; struct Point3D : Point { unique_ptr\u003cPoint\u003e create() { return make_unique\u003cPoint3D\u003e(); } unique_ptr\u003cPoint\u003e clone() { return make_unique\u003cPoint3D\u003e(*this); } }; void who_am_i(Point *who) { auto new_who\t= who-\u003ecreate(); // `create` the object of same type i.e. pointed by who ? auto duplicate_who = who-\u003eclone();\t// `copy` the object of same type i.e. pointed by who ? delete who; } As shown above, we have leveraged polymorphic methods by delegating the act of creation \u0026 copying the object to the derived class through the use of pure virtual methods. Above code is not only implement virtual constructor(i.e. create()) but also implements virtual copy constructor(i.e. clone()). Make sure while using Abstract Factory you have ensured the Liskov’s Substitution Principle(LSP). Functional Approach to Factory Design Pattern using Modern C++ In our Abstract Factory example, we have followed the object-oriented approach but its equally possible nowadays to a more functional approach. So, let’s build a similar kind of Factory without relying on polymorphic functionality as it might not suit some time-constrained application like an embedded system. Because the virtual table \u0026 dynamic dispatch mechanism may troll system during critical functionality. This is pretty straight forward as it uses functional \u0026 lambda functions as follows: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 struct Point { /* . . . */ }; struct Point2D : Point {/* . . . */}; struct Point3D : Point {/* . . . */}; class PointFunctionalFactory { map\u003cPointType, function\u003cunique_ptr\u003cPoint\u003e() \u003e\u003e m_factories; public: PointFunctionalFactory() { m_factories[PointType::Point2D] = [] { return make_unique\u003cPoint2D\u003e(); }; m_factories[PointType::Point3D] = [] { return make_unique\u003cPoint3D\u003e(); }; } unique_ptr\u003cPoint\u003e create(PointType type) { return m_factories[type](); } }; int main() { PointFunctionalFactory pf; auto p2D = pf.create(PointType::Point2D); return EXIT_SUCCESS; } If you are thinking that we are over-engineering, then keep in mind that our object construction is simple here just to demonstrate the technique \u0026 so does our lambda function. When your object representation increases, it requires a lot of methods to call in order to instantiate object properly, in such case you just need to modify lambda expression of the factory or introduce Builder Design Pattern. Benefits of Factory Design Pattern Single point/class for different object creation. Thus easy to maintain \u0026 understand software. You can create the object without even knowing its type by using Abstract Factory. It provides great modularity. Imagine programming a video game, where you would like to add new types of enemies in the future, each of which has different AI functions and can update differently. By using a factory method, the controller of the program can call to the factory to create the enemies, without any dependency or knowledge of the actual types of enemies. Now, future developers can create new enemies, with new AI controls and new drawing member functions, add it to the factory, and create a level which calls the factory, asking for the enemies by name. Combine this method with an XML description of levels, and developers could create new levels without having to recompile their program. All this, thanks to the separation of creation of objects from the usage of objects. Allows you to change the design of your application more readily, this is known as loose coupling. Summary by FAQs What is the correct way to implement the Factory Design Pattern in C++?\nAbstract Factory \u0026 Functional Factory is always a good choice.\nFactory vs Abstract Factory vs Functional Factory?\nFactory: Create an object with varied instantiation. Abstract Factor: Create an object without knowing its type \u0026 refer using base class pointer \u0026 reference. Access using polymorphic methods. Functional Factory: When object creation is more complex. Abstract Factory + Builder Design Pattern. Although I have not included Builder in Functional Factory example. What’s the difference between Abstract Factory and Builder Design Pattern?\nFactory produces the objects in wholesale that could be any object from inheritance hierarchy(like Point, Point2D, Point3D). While Builder deals with instantiation of an object that is limited to a single object(Although this statement is still debatable). You see Factory is all about wholesale object creation while the builder is piecewise object creation. In both the patterns, you can separate out the mechanism related to object creation in other classes. When to use the Factory Design Pattern?\nEmploy Factory Design Pattern to create an object of required functionality(s) but the type of object will remain undecided or it will be decided on dynamic parameters being passed.\n","wordCount":"2040","inLanguage":"en","image":"http://localhost:1313/images/Factory-Design-Pattern-in-Modern-C-vishal-chovatiya.webp","datePublished":"2020-04-06T00:00:00Z","dateModified":"2020-04-06T00:00:00Z","author":{"@type":"Person","name":"Vishal Chovatiya"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/factory-design-pattern-in-modern-cpp/"},"publisher":{"@type":"Organization","name":"Vishal Chovatiya","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/trident_favicon.webp"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Vishal Chovatiya (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Vishal Chovatiya</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/pages/vishal-chovatiya title="About Me"><span>About Me</span></a></li><li><a href=http://localhost:1313/pages/start-here title="Start Here"><span>Start Here</span></a></li><li><a href=http://localhost:1313/posts/ title=Latest><span>Latest</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Factory Design Pattern in Modern C++</h1><div class=post-meta><span title='2020-04-06 00:00:00 +0000 UTC'>April 6, 2020</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;2040 words&nbsp;·&nbsp;Vishal Chovatiya&nbsp;|&nbsp;<a href=https://github.com/vishalchovatiya/blog/blob/main/vishalchovatiya/content/posts/factory-design-pattern-in-modern-cpp.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=http://localhost:1313/images/Factory-Design-Pattern-in-Modern-C-vishal-chovatiya.webp alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#intent>Intent</a></li><li><a href=#motivation>Motivation</a></li><li><a href=#factory-design-pattern-examples-in-c>Factory Design Pattern Examples in C++</a><ul><li><a href=#factory-method>Factory Method</a></li><li><a href=#classical-factory-design-pattern>Classical Factory Design Pattern</a></li><li><a href=#inner-factory>Inner Factory</a></li><li><a href=#abstract-factory>Abstract Factory</a></li><li><a href=#functional-approach-to-factory-design-pattern-using-modern-c>Functional Approach to Factory Design Pattern using Modern C++</a></li></ul></li><li><a href=#benefits-of-factory-design-pattern>Benefits of Factory Design Pattern</a></li><li><a href=#summary-by-faqs>Summary by FAQs</a></li></ul></nav></div></details></div><div class=post-content><p>In software engineering, Creational Design Patterns deal with object creation mechanisms, i.e. try to create objects in a manner suitable to the situation. In addition to this basic or ordinary form of object creation could result in design problems or added complexity to the design. Factory Design Pattern in C++ helps to mitigate this issue by <strong><em>creating objects using separate methods or polymorphic classes</em></strong>.</p><p>By the way, If you haven’t check out my other articles on Creational Design Patterns, then here is the list:</p><ol><li><a href=/posts//factory-design-pattern-in-modern-cpp/>Factory</a></li><li><a href=/posts//builder-design-pattern-in-modern-cpp/>Builder</a></li><li><a href=/posts//prototype-design-pattern-in-modern-cpp/>Prototype</a></li><li><a href=/posts//singleton-design-pattern-in-modern-cpp/>Singleton</a></li></ol><p>The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like <code>override</code>, <code>final</code>, <code>public</code>(while inheritance) just to make code compact & consumable(most of the time) in single standard screen size. I also prefer <code>struct</code> instead of <code>class</code> just to save line by not writing &ldquo;<code>public:</code>&rdquo; sometimes and also miss <a href=/posts//part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/>virtual destructor</a>, constructor, <a href=/posts//all-about-copy-constructor-in-cpp-with-example/>copy constructor</a>, prefix <code>std::</code>, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.</p><p><strong><em>Note:</em></strong></p><ul><li>If you stumbled here directly, then I would suggest you go through <a href=/posts//what-is-design-pattern/>What is design pattern?</a> first, even if it is trivial. I believe it will encourage you to explore more on this topic.</li><li>All of this code you encounter in this series of articles are compiled using C++20(though I have used <a href=/posts//21-new-features-of-modern-cpp-to-use-in-your-project/>Modern C++</a> features up to C++17 in most cases). So if you don&rsquo;t have access to the latest compiler you can use <a href=https://wandbox.org/>https://wandbox.org/</a> which has preinstalled boost library as well.</li></ul><h2 id=intent>Intent<a hidden class=anchor aria-hidden=true href=#intent>#</a></h2><blockquote><p><strong><em>For the creation of wholesale objects unlike builder(which creates piecewise).</em></strong></p></blockquote><h2 id=motivation>Motivation<a hidden class=anchor aria-hidden=true href=#motivation>#</a></h2><ul><li>Let say you have a <code>Point</code> class having <code>x</code> & <code>y</code> as co-ordinates which can be Cartesian or Polar coordinate as below:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Point</span><span class=p>(</span><span class=kt>float</span> <span class=n>x</span><span class=p>,</span> <span class=kt>float</span> <span class=n>y</span><span class=p>){</span> <span class=cm>/*...*/</span> <span class=p>}</span> 		<span class=c1>// Cartesian co-ordinates
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// Not OK: Cannot overload with same type of arguments
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// Point(float a, float b){ /*...*/ } 	 // Polar co-ordinates
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// ... Implementation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>This isn&rsquo;t possible as you might know you can not create two constructors with the same type of arguments.</li><li>Other way around is:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>enum</span> <span class=k>class</span> <span class=nc>PointType</span><span class=p>{</span> <span class=n>cartesian</span><span class=p>,</span> <span class=n>polar</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Point</span><span class=p>(</span><span class=kt>float</span> <span class=n>a</span><span class=p>,</span> <span class=kt>float</span> <span class=n>b</span><span class=p>,</span> <span class=n>PointTypetype</span> <span class=o>=</span> <span class=n>PointType</span><span class=o>::</span><span class=n>cartesian</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>type</span> <span class=o>==</span> <span class=n>PointType</span><span class=o>::</span><span class=n>cartesian</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>sin</span><span class=p>(</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>But this isn&rsquo;t a sophisticated way of doing this. Rather we should delegate separate instantiation to separate methods.</li></ul><h2 id=factory-design-pattern-examples-in-c>Factory Design Pattern Examples in C++<a hidden class=anchor aria-hidden=true href=#factory-design-pattern-examples-in-c>#</a></h2><ul><li>So as you can guess. We are going to mitigate constructor limitation by moving the initialization process from constructor to other structure. And we gonna be using the Factory Method for that.</li><li>And just as the name suggests it uses the method or member function to initialize the object.</li></ul><h3 id=factory-method>Factory Method<a hidden class=anchor aria-hidden=true href=#factory-method>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>enum</span> <span class=k>class</span> <span class=nc>PointType</span> <span class=p>{</span> <span class=n>cartesian</span><span class=p>,</span> <span class=n>polar</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>float</span> 		<span class=n>m_x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>float</span> 		<span class=n>m_y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>PointType</span> 	<span class=n>m_type</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Private constructor, so that object can&#39;t be created directly
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>Point</span><span class=p>(</span><span class=k>const</span> <span class=kt>float</span> <span class=n>x</span><span class=p>,</span> <span class=k>const</span> <span class=kt>float</span> <span class=n>y</span><span class=p>,</span> <span class=n>PointType</span> <span class=n>t</span><span class=p>)</span> <span class=o>:</span> <span class=n>m_x</span><span class=p>{</span><span class=n>x</span><span class=p>},</span> <span class=n>m_y</span><span class=p>{</span><span class=n>y</span><span class=p>},</span> <span class=n>m_type</span><span class=p>{</span><span class=n>t</span><span class=p>}</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>	<span class=k>friend</span> <span class=n>ostream</span> <span class=o>&amp;</span><span class=k>operator</span><span class=o>&lt;&lt;</span><span class=p>(</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>os</span><span class=p>,</span> <span class=k>const</span> <span class=n>Point</span> <span class=o>&amp;</span><span class=n>obj</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>os</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;x: &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>obj</span><span class=p>.</span><span class=n>m_x</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; y: &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>obj</span><span class=p>.</span><span class=n>m_y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>static</span> <span class=n>Point</span> <span class=nf>NewCartesian</span><span class=p>(</span><span class=kt>float</span> <span class=n>x</span><span class=p>,</span> <span class=kt>float</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=p>{</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>PointType</span><span class=o>::</span><span class=n>cartesian</span><span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>static</span> <span class=n>Point</span> <span class=nf>NewPolar</span><span class=p>(</span><span class=kt>float</span> <span class=n>a</span><span class=p>,</span> <span class=kt>float</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=p>{</span><span class=n>a</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>b</span><span class=p>),</span> <span class=n>a</span> <span class=o>*</span> <span class=n>sin</span><span class=p>(</span><span class=n>b</span><span class=p>),</span> <span class=n>PointType</span><span class=o>::</span><span class=n>polar</span><span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Point p{ 1,2 };  // will not work
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>auto</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Point</span><span class=o>::</span><span class=n>NewPolar</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=n>M_PI_4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>p</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>  <span class=c1>// x: 3.53553 y: 3.53553
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>As you can observe from the implementation. It actually disallows the use of constructor & forcing users to use static methods instead. And this is the essence of the <strong><em>Factory Method i.e. private constructor & static method</em></strong>.</li></ul><h3 id=classical-factory-design-pattern>Classical Factory Design Pattern<a hidden class=anchor aria-hidden=true href=#classical-factory-design-pattern>#</a></h3><ul><li>If you have dedicated code for construction then why don&rsquo;t we move it to a dedicated class! And Just to separation the concerns i.e. <a href=/posts/single-responsibility-principle-in-cpp-solid-as-a-rock/>Single Responsibility Principle</a> from SOLID design principles.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ... as it is from above
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>friend</span> <span class=k>class</span> <span class=nc>PointFactory</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PointFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=n>Point</span> <span class=n>NewCartesian</span><span class=p>(</span><span class=kt>float</span> <span class=n>x</span><span class=p>,</span> <span class=kt>float</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=n>Point</span> <span class=nf>NewPolar</span><span class=p>(</span><span class=kt>float</span> <span class=n>r</span><span class=p>,</span> <span class=kt>float</span> <span class=n>theta</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span> <span class=n>r</span><span class=o>*</span><span class=n>cos</span><span class=p>(</span><span class=n>theta</span><span class=p>),</span> <span class=n>r</span><span class=o>*</span><span class=n>sin</span><span class=p>(</span><span class=n>theta</span><span class=p>)</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Mind that this is not the abstract factory this is a concrete factory.</li><li>Making the <code>PointFactory</code> friend class of <code>Point</code> we have violated the <a href=/posts/open-closed-principle-in-cpp-solid-as-a-rock/>Open-Closed Principle</a>(OCP). As friend keyword itself contrary to OCP.</li></ul><h3 id=inner-factory>Inner Factory<a hidden class=anchor aria-hidden=true href=#inner-factory>#</a></h3><ul><li>There is a critical thing we missed in our Factory that there is no strong link between <code>PointFactory</code> & <code>Point</code> which confuses user to use <code>Point</code> just by seeing everything is <code>private</code>.</li><li>So rather than designing a factory outside the class. We can simply put it in the class which encourage users to use Factory.</li><li>Thus, we also serve the second problem which is breaking the <a href=/posts/open-closed-principle-in-cpp-solid-as-a-rock/>Open-Closed Principle</a>. And this will be somewhat more intuitive for the user to use Factory.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span>   <span class=n>m_x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span>   <span class=n>m_y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Point</span><span class=p>(</span><span class=kt>float</span> <span class=n>x</span><span class=p>,</span> <span class=kt>float</span> <span class=n>y</span><span class=p>)</span> <span class=o>:</span> <span class=n>m_x</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=n>m_y</span><span class=p>(</span><span class=n>y</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=nc>Factory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=n>Point</span> <span class=nf>NewCartesian</span><span class=p>(</span><span class=kt>float</span> <span class=n>x</span><span class=p>,</span> <span class=kt>float</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=p>{</span> <span class=n>x</span><span class=p>,</span><span class=n>y</span> <span class=p>};</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=n>Point</span> <span class=nf>NewPolar</span><span class=p>(</span><span class=kt>float</span> <span class=n>r</span><span class=p>,</span> <span class=kt>float</span> <span class=n>theta</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span><span class=p>{</span> <span class=n>r</span><span class=o>*</span><span class=n>cos</span><span class=p>(</span><span class=n>theta</span><span class=p>),</span> <span class=n>r</span><span class=o>*</span><span class=n>sin</span><span class=p>(</span><span class=n>theta</span><span class=p>)</span> <span class=p>};</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Point</span><span class=o>::</span><span class=n>Factory</span><span class=o>::</span><span class=n>NewCartesian</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=abstract-factory>Abstract Factory<a hidden class=anchor aria-hidden=true href=#abstract-factory>#</a></h3><h4 id=why-do-we-need-an-abstract-factory>Why do we need an Abstract Factory?<a hidden class=anchor aria-hidden=true href=#why-do-we-need-an-abstract-factory>#</a></h4><ul><li>C++ has the support of polymorphic object destruction using it’s base class’s <a href=/posts/part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/>virtual destructor</a>. Similarly, equivalent support for creation & copying of objects is missing as C++ doesn&rsquo;t support <a href=/posts/7-advanced-cpp-concepts-idiom-examples-you-should-know/>virtual constructor</a> & <a href=/posts/all-about-copy-constructor-in-cpp-with-example/>virtual copy constructors</a>.</li><li>Moreover, you can’t create an object unless you know its static type, because the compiler must know the amount of space it needs to allocate. For the same reason, copy of an object also requires its type to known at compile-time.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Point</span><span class=p>(){</span> <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&#34;~Point</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point2D</span> <span class=o>:</span> <span class=n>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>Point2D</span><span class=p>(){</span> <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&#34;~Point2D</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point3D</span> <span class=o>:</span> <span class=n>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>Point3D</span><span class=p>(){</span> <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&#34;~Point3D</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>who_am_i</span><span class=p>(</span><span class=n>Point</span> <span class=o>*</span><span class=n>who</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// Not sure whether Point2D would be passed here or Point3D
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// How to `create` the object of same type i.e. pointed by who ?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// How to `copy` object of same type i.e. pointed by who ?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>delete</span> <span class=n>who</span><span class=p>;</span> <span class=c1>// you can delete object pointed by who, thanks to virtual destructor
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=example-of-abstract-factory-design-pattern>Example of Abstract Factory Design Pattern<a hidden class=anchor aria-hidden=true href=#example-of-abstract-factory-design-pattern>#</a></h4><ul><li>The Abstract Factory is useful in a situation that requires the creation of many different types of objects, all derived from a common base type.</li><li>The Abstract Factory defines a method for creating the objects, which <a href=/posts/memory-layout-of-cpp-object/>subclasses</a> can then override to specify the derived type that will be created. Thus, at run time, the appropriate Abstract Factory Method will be called depending upon the type of object referenced/pointed & return a base class pointer to a new instance of that object.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>virtual</span> <span class=o>~</span><span class=n>Point</span><span class=p>()</span> <span class=o>=</span> <span class=k>default</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>virtual</span> <span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>create</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>virtual</span> <span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>clone</span><span class=p>()</span>	<span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point2D</span> <span class=o>:</span> <span class=n>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>create</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Point2D</span><span class=o>&gt;</span><span class=p>();</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>clone</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Point2D</span><span class=o>&gt;</span><span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point3D</span> <span class=o>:</span> <span class=n>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>create</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Point3D</span><span class=o>&gt;</span><span class=p>();</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>clone</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Point3D</span><span class=o>&gt;</span><span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>who_am_i</span><span class=p>(</span><span class=n>Point</span> <span class=o>*</span><span class=n>who</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>auto</span> <span class=n>new_who</span>	   <span class=o>=</span> <span class=n>who</span><span class=o>-&gt;</span><span class=n>create</span><span class=p>();</span> <span class=c1>// `create` the object of same type i.e. pointed by who ?
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>auto</span> <span class=n>duplicate_who</span> <span class=o>=</span> <span class=n>who</span><span class=o>-&gt;</span><span class=n>clone</span><span class=p>();</span>	<span class=c1>// `copy` the object of same type i.e. pointed by who ?
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>delete</span> <span class=n>who</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>As shown above, we have leveraged polymorphic methods by delegating the act of creation & copying the object to the derived class through the use of pure virtual methods.</li><li>Above code is not only implement <a href=/posts/7-advanced-cpp-concepts-idiom-examples-you-should-know/#Virtual-Constructor>virtual constructor</a>(i.e. <code>create()</code>) but also implements <a href=/posts/7-advanced-cpp-concepts-idiom-examples-you-should-know/#Virtual-Constructor>virtual copy constructor</a>(i.e. <code>clone()</code>).</li><li>Make sure while using Abstract Factory you have ensured the <a href=/posts/liskovs-substitution-principle-in-cpp-solid-as-a-rock/>Liskov&rsquo;s Substitution Principle(LSP)</a>.</li></ul><h3 id=functional-approach-to-factory-design-pattern-using-modern-c>Functional Approach to Factory Design Pattern using Modern C++<a hidden class=anchor aria-hidden=true href=#functional-approach-to-factory-design-pattern-using-modern-c>#</a></h3><ul><li>In our Abstract Factory example, we have followed the object-oriented approach but its equally possible nowadays to a more functional approach.</li><li>So, let&rsquo;s build a similar kind of Factory without relying on polymorphic functionality as it might not suit some time-constrained application like an <a href=https://en.wikipedia.org/wiki/Embedded_system>embedded system</a>. Because the <a href=/posts/part-1-all-about-virtual-keyword-in-cpp-how-virtual-function-works-internally/>virtual table & dynamic dispatch mechanism</a> may troll system during critical functionality.</li><li>This is pretty straight forward as it uses functional & <a href=/posts/learn-lambda-function-in-cpp-with-example/>lambda functions</a> as follows:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point</span> <span class=p>{</span> <span class=cm>/* . . . */</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point2D</span> <span class=o>:</span> <span class=n>Point</span> <span class=p>{</span><span class=cm>/* . . . */</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Point3D</span> <span class=o>:</span> <span class=n>Point</span> <span class=p>{</span><span class=cm>/* . . . */</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PointFunctionalFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>map</span><span class=o>&lt;</span><span class=n>PointType</span><span class=p>,</span> <span class=n>function</span><span class=o>&lt;</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span><span class=p>()</span> <span class=o>&gt;&gt;</span>      <span class=n>m_factories</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>PointFunctionalFactory</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m_factories</span><span class=p>[</span><span class=n>PointType</span><span class=o>::</span><span class=n>Point2D</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span> <span class=p>{</span> <span class=k>return</span> <span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Point2D</span><span class=o>&gt;</span><span class=p>();</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=n>m_factories</span><span class=p>[</span><span class=n>PointType</span><span class=o>::</span><span class=n>Point3D</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span> <span class=p>{</span> <span class=k>return</span> <span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Point3D</span><span class=o>&gt;</span><span class=p>();</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>    
</span></span><span class=line><span class=cl>    <span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Point</span><span class=o>&gt;</span> <span class=n>create</span><span class=p>(</span><span class=n>PointType</span> <span class=n>type</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>m_factories</span><span class=p>[</span><span class=n>type</span><span class=p>]();</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>PointFunctionalFactory</span> <span class=n>pf</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>p2D</span> <span class=o>=</span> <span class=n>pf</span><span class=p>.</span><span class=n>create</span><span class=p>(</span><span class=n>PointType</span><span class=o>::</span><span class=n>Point2D</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>If you are thinking that we are over-engineering, then keep in mind that our object construction is simple here just to demonstrate the technique & so does our lambda function.</li><li>When your object representation increases, it requires a lot of methods to call in order to instantiate object properly, in such case you just need to modify lambda expression of the factory or introduce <a href=/posts/builder-design-pattern-in-modern-cpp/>Builder Design Pattern</a>.</li></ul><h2 id=benefits-of-factory-design-pattern>Benefits of Factory Design Pattern<a hidden class=anchor aria-hidden=true href=#benefits-of-factory-design-pattern>#</a></h2><ol><li>Single point/class for different object creation. Thus easy to maintain & understand software.</li><li>You can create the object without even knowing its type by using Abstract Factory.</li><li>It provides great modularity. Imagine programming a video game, where you would like to add new types of enemies in the future, each of which has different AI functions and can update differently. By using a factory method, the controller of the program can call to the factory to create the enemies, without any dependency or knowledge of the actual types of enemies. Now, future developers can create new enemies, with new AI controls and new drawing member functions, add it to the factory, and create a level which calls the factory, asking for the enemies by name. Combine this method with an XML description of levels, and developers could create new levels without having to recompile their program. All this, thanks to the separation of creation of objects from the usage of objects.</li><li>Allows you to change the design of your application more readily, this is known as loose coupling.</li></ol><h2 id=summary-by-faqs>Summary by FAQs<a hidden class=anchor aria-hidden=true href=#summary-by-faqs>#</a></h2><p><strong>What is the correct way to implement the Factory Design Pattern in C++?</strong></p><p>Abstract Factory & Functional Factory is always a good choice.</p><p><strong>Factory vs Abstract Factory vs Functional Factory?</strong></p><ul><li>Factory: Create an object with varied instantiation.</li><li>Abstract Factor: Create an object without knowing its type & refer using base class pointer & reference. Access using polymorphic methods.</li><li>Functional Factory: When object creation is more complex. Abstract Factory + <a href=/posts/builder-design-pattern-in-modern-cpp/>Builder Design Pattern</a>. Although I have not included Builder in Functional Factory example.</li></ul><p><strong>What&rsquo;s the difference between Abstract Factory and Builder Design Pattern?</strong></p><ul><li>Factory produces the objects in wholesale that could be any object from inheritance hierarchy(like Point, Point2D, Point3D). While Builder deals with instantiation of an object that is limited to a single object(Although this statement is still debatable).</li><li>You see Factory is all about wholesale object creation while the builder is piecewise object creation. In both the patterns, you can separate out the mechanism related to object creation in other classes.</li></ul><p><strong>When to use the Factory Design Pattern?</strong></p><p>Employ Factory Design Pattern to create an object of required functionality(s) but the type of object will remain undecided or it will be decided on dynamic parameters being passed.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/abstract-factory/>Abstract-Factory</a></li><li><a href=http://localhost:1313/tags/abstract-factory-c/>Abstract-Factory-C</a></li><li><a href=http://localhost:1313/tags/abstract-factory-c-example/>Abstract-Factory-C-Example</a></li><li><a href=http://localhost:1313/tags/abstract-factory-design-pattern/>Abstract-Factory-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/abstract-factory-design-pattern-c/>Abstract-Factory-Design-Pattern-C</a></li><li><a href=http://localhost:1313/tags/abstract-factory-in-c/>Abstract-Factory-in-C</a></li><li><a href=http://localhost:1313/tags/abstract-factory-pattern-c/>Abstract-Factory-Pattern-C</a></li><li><a href=http://localhost:1313/tags/abstract-factory-pattern-c-example/>Abstract-Factory-Pattern-C-Example</a></li><li><a href=http://localhost:1313/tags/benefits-of-factory-design-pattern/>Benefits-of-Factory-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/c-abstract-factory/>C-Abstract-Factory</a></li><li><a href=http://localhost:1313/tags/c-abstract-factory-pattern/>C-Abstract-Factory-Pattern</a></li><li><a href=http://localhost:1313/tags/c-design-pattern-factory/>C-Design-Pattern-Factory</a></li><li><a href=http://localhost:1313/tags/c-factory-method/>C-Factory-Method</a></li><li><a href=http://localhost:1313/tags/c-factory-pattern/>C-Factory-Pattern</a></li><li><a href=http://localhost:1313/tags/c-factory-pattern-example/>C-Factory-Pattern-Example</a></li><li><a href=http://localhost:1313/tags/c-factory-pattern-template/>C-Factory-Pattern-Template</a></li><li><a href=http://localhost:1313/tags/classical-factory-design-pattern/>Classical-Factory-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/design-pattern-factory-c/>Design-Pattern-Factory-C</a></li><li><a href=http://localhost:1313/tags/example-of-abstract-factory-design-pattern/>Example-of-Abstract-Factory-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-c/>Factory-Design-Pattern-C</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-c-example/>Factory-Design-Pattern-C-Example</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-cpp/>Factory-Design-Pattern-Cpp</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-example-in-c/>Factory-Design-Pattern-Example-in-C</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-examples-in-c/>Factory-Design-Pattern-Examples-in-C</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-in-c/>Factory-Design-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-in-c-with-example/>Factory-Design-Pattern-in-C-With-Example</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-in-cpp/>Factory-Design-Pattern-in-Cpp</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-in-modern-c/>Factory-Design-Pattern-in-Modern-C</a></li><li><a href=http://localhost:1313/tags/factory-design-pattern-intent/>Factory-Design-Pattern-Intent</a></li><li><a href=http://localhost:1313/tags/factory-method-c/>Factory-Method-C</a></li><li><a href=http://localhost:1313/tags/factory-method-design-pattern-c/>Factory-Method-Design-Pattern-C</a></li><li><a href=http://localhost:1313/tags/factory-method-design-pattern-in-c/>Factory-Method-Design-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/factory-method-in-c/>Factory-Method-in-C</a></li><li><a href=http://localhost:1313/tags/factory-method-pattern-c/>Factory-Method-Pattern-C</a></li><li><a href=http://localhost:1313/tags/factory-pattern-c-2/>Factory-Pattern-C-2</a></li><li><a href=http://localhost:1313/tags/factory-pattern-c-example/>Factory-Pattern-C-Example</a></li><li><a href=http://localhost:1313/tags/factory-pattern-in-c/>Factory-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/functional-factory-design-pattern-using-modern-c/>Functional-Factory-Design-Pattern-Using-Modern-C</a></li><li><a href=http://localhost:1313/tags/inner-factory/>Inner-Factory</a></li><li><a href=http://localhost:1313/tags/motivation-for-factory-design-pattern/>Motivation-for-Factory-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/what-is-the-correct-way-to-implement-the-factory-design-pattern-in-c/>What-Is-the-Correct-Way-to-Implement-the-Factory-Design-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/when-to-use-the-factory-design-pattern/>When-to-Use-the-Factory-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/why-do-we-need-an-abstract-factory/>Why-Do-We-Need-an-Abstract-Factory</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/dependency-inversion-principle-in-cpp-solid-as-a-rock/><span class=title>« Prev</span><br><span>Dependency Inversion Principle in C++ | SOLID as a Rock</span>
</a><a class=next href=http://localhost:1313/posts/interface-segregation-principle-in-cpp-solid-as-a-rock/><span class=title>Next »</span><br><span>Interface Segregation Principle in C++ | SOLID as a Rock</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on x" href="https://x.com/intent/tweet/?text=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f&amp;hashtags=abstract-factory%2cabstract-factory-c%2cabstract-factory-c-example%2cabstract-factory-design-pattern%2cabstract-factory-design-pattern-c%2cabstract-factory-in-c%2cabstract-factory-pattern-c%2cabstract-factory-pattern-c-example%2cbenefits-of-factory-design-pattern%2cc-abstract-factory%2cc-abstract-factory-pattern%2cc-design-pattern-factory%2cc-factory-method%2cc-factory-pattern%2cc-factory-pattern-example%2cc-factory-pattern-template%2cclassical-factory-design-pattern%2cdesign-pattern-factory-c%2cexample-of-abstract-factory-design-pattern%2cfactory-design-pattern-c%2cfactory-design-pattern-c-example%2cfactory-design-pattern-cpp%2cfactory-design-pattern-example-in-c%2cfactory-design-pattern-examples-in-c%2cfactory-design-pattern-in-c%2cfactory-design-pattern-in-c-with-example%2cfactory-design-pattern-in-cpp%2cfactory-design-pattern-in-modern-c%2cfactory-design-pattern-intent%2cfactory-method-c%2cfactory-method-design-pattern-c%2cfactory-method-design-pattern-in-c%2cfactory-method-in-c%2cfactory-method-pattern-c%2cfactory-pattern-c-2%2cfactory-pattern-c-example%2cfactory-pattern-in-c%2cfunctional-factory-design-pattern-using-modern-c%2cinner-factory%2cmotivation-for-factory-design-pattern%2cwhat-is-the-correct-way-to-implement-the-factory-design-pattern-in-c%2cwhen-to-use-the-factory-design-pattern%2cwhy-do-we-need-an-abstract-factory"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f&amp;title=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;summary=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f&title=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on whatsapp" href="https://api.whatsapp.com/send?text=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on telegram" href="https://telegram.me/share/url?text=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Factory Design Pattern in Modern C++ on ycombinator" href="https://news.ycombinator.com/submitlink?t=Factory%20Design%20Pattern%20in%20Modern%20C%2b%2b&u=http%3a%2f%2flocalhost%3a1313%2fposts%2ffactory-design-pattern-in-modern-cpp%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Vishal Chovatiya</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>