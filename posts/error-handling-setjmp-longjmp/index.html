<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Error Handling : setjmp &amp; longjmp · Vishal Chovatiya
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Vishal Chovatiya">
<meta name="description" content="Points To Catch Link to heading As for the control flow: setjmp returns twice, and longjmp never returns. When you call setjmp for the first time, to store the environment, it returns zero, And then when you call longjmp, the control flow passes to return from setjmp with the value provided in the argument. Use cases are generally cited as &ldquo;error handling&rdquo;, and &ldquo;don&rsquo;t use these functions&rdquo;. Note: setjmp needn&rsquo;t actually be functions; it may well be a macro.">
<meta name="keywords" content="blog,developer,personal">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Error Handling : setjmp &amp; longjmp">
  <meta name="twitter:description" content="Points To Catch Link to heading As for the control flow: setjmp returns twice, and longjmp never returns. When you call setjmp for the first time, to store the environment, it returns zero, And then when you call longjmp, the control flow passes to return from setjmp with the value provided in the argument. Use cases are generally cited as “error handling”, and “don’t use these functions”. Note: setjmp needn’t actually be functions; it may well be a macro.">

<meta property="og:url" content="http://localhost:1313/posts/error-handling-setjmp-longjmp/">
  <meta property="og:site_name" content="Vishal Chovatiya">
  <meta property="og:title" content="Error Handling : setjmp &amp; longjmp">
  <meta property="og:description" content="Points To Catch Link to heading As for the control flow: setjmp returns twice, and longjmp never returns. When you call setjmp for the first time, to store the environment, it returns zero, And then when you call longjmp, the control flow passes to return from setjmp with the value provided in the argument. Use cases are generally cited as “error handling”, and “don’t use these functions”. Note: setjmp needn’t actually be functions; it may well be a macro.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-09-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2016-09-10T00:00:00+00:00">




<link rel="canonical" href="http://localhost:1313/posts/error-handling-setjmp-longjmp/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Vishal Chovatiya
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Latest</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/pages/start-here">Start Here</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/cpp/">C/C&#43;&#43;</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/linux-system-programming/">Linux System Programming</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/misc/">Misc</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/error-handling-setjmp-longjmp/">
              Error Handling : setjmp &amp; longjmp
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2016-09-10T00:00:00Z">
                September 10, 2016
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              2-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/linux-system-programming/">Linux-System-Programming</a></div>

          
        </div>
      </header>

      <div class="post-content">
        
        <h3 id="points-to-catch">
  Points To Catch
  <a class="heading-link" href="#points-to-catch">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>As for the control flow: <code>setjmp</code> returns twice, and <code>longjmp</code> never returns.</li>
<li>When you call <code>setjmp</code> for the first time, to store the environment, it returns zero,</li>
<li>And then when you call <code>longjmp</code>, the control flow passes to return from <code>setjmp</code> with the value provided in the argument.</li>
<li>Use cases are generally cited as &ldquo;error handling&rdquo;, and &ldquo;don&rsquo;t use these functions&rdquo;.</li>
</ul>
<p><strong>Note:</strong> <code>setjmp</code> needn&rsquo;t actually be functions; it may well be a macro. <code>longjmp</code> is a function, though.</p>
<p>Here&rsquo;s a little control flow example:</p>
<h3 id="httpsgithubcomvisheshpatellinux-system-programmingblobmastersetjmp2020longjmp20error20handlingmdexampleexample">
  <a href="https://github.com/VisheshPatel/Linux-System-Programming/blob/master/setjmp%20&amp;%20longjmp%20Error%20Handling.md#example"  class="external-link" target="_blank" rel="noopener"></a>Example
  <a class="heading-link" href="#httpsgithubcomvisheshpatellinux-system-programmingblobmastersetjmp2020longjmp20error20handlingmdexampleexample">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;setjmp.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>jmp_buf env;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">longjmp</span>(<span style="color:#f92672">&amp;</span>env, <span style="color:#ae81ff">10</span>);                      <span style="color:#f92672">+----&gt;----+</span>
</span></span><span style="display:flex;"><span>}                                           <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()              (entry)<span style="color:#f92672">---+</span>         <span style="color:#f92672">^</span>         V
</span></span><span style="display:flex;"><span>{                                 <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">setjmp</span>(<span style="color:#f92672">&amp;</span>env) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)         <span style="color:#f92672">|</span> (<span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)   <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span> (<span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>    {                             <span style="color:#f92672">|</span>         <span style="color:#f92672">^</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">foo</span>();                    <span style="color:#f92672">+----&gt;----+</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>    }                                                 <span style="color:#f92672">+----&gt;----+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>                                                        <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>    {                                                           <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;                                               <span style="color:#f92672">+---</span> (end)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="httpsgithubcomvisheshpatellinux-system-programmingblobmastersetjmp2020longjmp20error20handlingmdimportant-notesimportant-notes">
  <a href="https://github.com/VisheshPatel/Linux-System-Programming/blob/master/setjmp%20&amp;%20longjmp%20Error%20Handling.md#important-notes"  class="external-link" target="_blank" rel="noopener"></a>Important Notes:
  <a class="heading-link" href="#httpsgithubcomvisheshpatellinux-system-programmingblobmastersetjmp2020longjmp20error20handlingmdimportant-notesimportant-notes">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>You cannot pass 0 to <code>longjmp</code>. If you do, 1 is returned by <code>setjmp</code>.</li>
<li>You must not return from the function that called <code>setjmp</code> before the corresponding <code>longjmp</code>. In other words, <code>longjmp</code> must only be called above <code>setjmp</code> in the call stack.</li>
<li>You cannot actually store the result of <code>setjmp</code>. If you want to return in several different ways, you can use a switch, though:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (<span style="color:#a6e22e">setjmp</span>(<span style="color:#f92672">&amp;</span>env))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span>   <span style="color:#75715e">// first call
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>   <span style="color:#75715e">// returned from longjmp(&amp;env, 2)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span>   <span style="color:#75715e">// returned from longjmp(&amp;env, 5)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// etc.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span></code></pre></div>
      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
     Vishal Chovatiya 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
