<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Iterator Design Pattern in Modern C++ | Vishal Chovatiya</title>
<meta name=keywords content="advantages-and-disadvantages-of-iterator-design-pattern,benefits-of-iterator-design-pattern,binary-tree-iterator,binary-tree-iterator-with-c20-co-routines,boost-iterator-facade-example,iterator-design-pattern-c,iterator-design-pattern-c-code,iterator-design-pattern-c-example,iterator-design-pattern-cpp,iterator-design-pattern-examples-in-c,iterator-design-pattern-implementation-in-c,iterator-design-pattern-in-c,iterator-design-pattern-in-modern-c,iterator-design-pattern-real-world-example,what-is-the-purpose-of-iterator-design-pattern"><meta name=description content="Iterator Design Pattern in Modern C++ is a heavily used pattern i.e. provides facility to traverse data containers sophistically. For simplicity, you can consider a pointer moving across an array, but the real magic comes when you get to the next element of a container, in that case, you need not know anything about how the container is constructed(like sequential(not necessarily be contiguous), associative or hashed). This is handled by the iterator."><meta name=author content="Vishal Chovatiya"><link rel=canonical href=http://localhost:1313/posts/iterator-design-pattern-in-modern-cpp/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/trident_favicon.webp><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/images/trident_favicon.webp><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/images/trident_favicon.webp><link rel=apple-touch-icon href=http://localhost:1313/images/trident_favicon.webp><link rel=mask-icon href=http://localhost:1313/images/trident_favicon.webp><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/iterator-design-pattern-in-modern-cpp/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Iterator Design Pattern in Modern C++"><meta property="og:description" content="Iterator Design Pattern in Modern C++ is a heavily used pattern i.e. provides facility to traverse data containers sophistically. For simplicity, you can consider a pointer moving across an array, but the real magic comes when you get to the next element of a container, in that case, you need not know anything about how the container is constructed(like sequential(not necessarily be contiguous), associative or hashed). This is handled by the iterator."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/iterator-design-pattern-in-modern-cpp/"><meta property="og:image" content="http://localhost:1313/images/Iterator-Design-Pattern-in-Modern-C-vishal-chovatiya.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-03T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-03T00:00:00+00:00"><meta property="og:site_name" content="Vishal Chovatiya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/Iterator-Design-Pattern-in-Modern-C-vishal-chovatiya.png"><meta name=twitter:title content="Iterator Design Pattern in Modern C++"><meta name=twitter:description content="Iterator Design Pattern in Modern C++ is a heavily used pattern i.e. provides facility to traverse data containers sophistically. For simplicity, you can consider a pointer moving across an array, but the real magic comes when you get to the next element of a container, in that case, you need not know anything about how the container is constructed(like sequential(not necessarily be contiguous), associative or hashed). This is handled by the iterator."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Iterator Design Pattern in Modern C++","item":"http://localhost:1313/posts/iterator-design-pattern-in-modern-cpp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Iterator Design Pattern in Modern C++","name":"Iterator Design Pattern in Modern C\u002b\u002b","description":"Iterator Design Pattern in Modern C++ is a heavily used pattern i.e. provides facility to traverse data containers sophistically. For simplicity, you can consider a pointer moving across an array, but the real magic comes when you get to the next element of a container, in that case, you need not know anything about how the container is constructed(like sequential(not necessarily be contiguous), associative or hashed). This is handled by the iterator.","keywords":["advantages-and-disadvantages-of-iterator-design-pattern","benefits-of-iterator-design-pattern","binary-tree-iterator","binary-tree-iterator-with-c20-co-routines","boost-iterator-facade-example","iterator-design-pattern-c","iterator-design-pattern-c-code","iterator-design-pattern-c-example","iterator-design-pattern-cpp","iterator-design-pattern-examples-in-c","iterator-design-pattern-implementation-in-c","iterator-design-pattern-in-c","iterator-design-pattern-in-modern-c","iterator-design-pattern-real-world-example","what-is-the-purpose-of-iterator-design-pattern"],"articleBody":"Iterator Design Pattern in Modern C++ is a heavily used pattern i.e. provides facility to traverse data containers sophistically. For simplicity, you can consider a pointer moving across an array, but the real magic comes when you get to the next element of a container, in that case, you need not know anything about how the container is constructed(like sequential(not necessarily be contiguous), associative or hashed). This is handled by the iterator.\nBy the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:\nChain of responsibility Command Interpreter Iterator Mediator Memento Observer State Strategy Template Method Visitor The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like override, final, public(while inheritance) just to make code compact \u0026 consumable(most of the time) in single standard screen size. I also prefer struct instead of class just to save line by not writing “public:” sometimes and also miss virtual destructor, constructor, copy constructor, prefix std::, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.\nNote:\nIf you stumbled here directly, then I would suggest you go through What is design pattern? first, even if it is trivial. I believe it will encourage you to explore more on this topic. All of this code you encounter in this series of articles are compiled using C++20(though I have used Modern C++ features up to C++17 in most cases). So if you don’t have access to the latest compiler you can use https://wandbox.org/ which has preinstalled boost library as well. Intent To facilitate the traversal of data structure.\nIterator is a core functionality of various containers provided in the standard C++ library. There are lots of cases where you’re using iterators without really knowing what you’re using them. For instance, if you use a range-based for-loop what you’re essentially using is begin, end \u0026 operator++ but you don’t see any of it. Another example is coroutines that’s also something where you have a method which returns a generator but the generator actually gives you the ability to iterate itself and you don’t see the iterators explicitly in this case either. Iterator Design Pattern Examples in C++ A typical example to illustrate iterator is to use single dimensional array \u0026 traverse it using pointer(with the same type as the element of the array). But this is a very simple \u0026 straight forward scenario where you can not imagine how important iterators are? So we will see the example of basic associative container i.e. Binary Tree. Binary Tree Iterator 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 template\u003ctypename T\u003e struct BinaryTree; template\u003ctypename T\u003e struct Node { T m_value = T(); Node\u003cT\u003e* m_parent{nullptr}; Node\u003cT\u003e* m_left{nullptr}; Node\u003cT\u003e* m_right{nullptr}; BinaryTree\u003cT\u003e* m_tree{nullptr}; Node(const T\u0026 v): m_value(v) {} Node(const T\u0026 v, Node\u003cT\u003e *const l, Node\u003cT\u003e *const r): m_value(v), m_left(l), m_right(r) { this-\u003em_left-\u003em_tree = this-\u003em_right-\u003em_tree = m_tree; this-\u003em_left-\u003em_parent = this-\u003em_right-\u003em_parent = this; } ~Node() { delete m_left; delete m_right; } void set_tree(BinaryTree\u003cT\u003e *t) { m_tree = t; if (m_left) m_left-\u003eset_tree(t); if (m_right) m_right-\u003eset_tree(t); } }; template\u003ctypename T\u003e struct BinaryTree { Node\u003cT\u003e* m_root = nullptr; BinaryTree(Node\u003cT\u003e *const r) : m_root{r} { m_root-\u003eset_tree(this); } ~BinaryTree() { delete m_root; } /* ---------------------------- Iterator Implementation ----------------------------- */ template\u003ctypename U\u003e struct PreOrderIterator { Node\u003cU\u003e *current; PreOrderIterator(Node\u003cU\u003e *c): current(c) {} bool operator!=(const PreOrderIterator\u003cU\u003e\u0026 rhs) { return current != rhs.current; } PreOrderIterator\u003cU\u003e\u0026 operator++() { if (current-\u003em_right) { current = current-\u003em_right; while (current-\u003em_left) current = current-\u003em_left; } else { Node\u003cT\u003e *p = current-\u003em_parent; while (p \u0026\u0026 current == p-\u003em_right) { current = p; p = p-\u003em_parent; } current = p; } return *this; } Node\u003cU\u003e\u0026 operator*() { return *current; } }; using iterator = PreOrderIterator\u003cT\u003e; iterator begin() { Node\u003cT\u003e *n = m_root; if (n) while (n-\u003em_left) n = n-\u003em_left; return iterator{n}; } iterator end() { return iterator{nullptr}; } /* ---------------------------------------------------------------------------------- */ }; int main() { // me // / \\ // mother father // / \\ // m'm m'f BinaryTree\u003cstring\u003e family { new Node\u003cstring\u003e{\"me\", new Node\u003cstring\u003e{\"mother\", new Node\u003cstring\u003e{\"mother's mother\"}, new Node\u003cstring\u003e{\"mother's father\"} }, new Node\u003cstring\u003e{\"father\"} } }; for_each(begin(family), end(family), // Works with STL algo [](auto\u0026\u0026 n) { cout \u003c\u003c n.m_value \u003c\u003c endl; }); for (const auto\u0026 it: family) // Works with range-based for loop as well cout \u003c\u003c it.m_value \u003c\u003c endl; return EXIT_SUCCESS; } /* mother's mother mother mother's father me father mother's mother mother mother's father me father */ The most difficult thing in the above example is implementing PreOrderIterator::operator++. So when we’re traversing the tree in pre-order. What’s happening is every time somebody calls plus-plus we need to move to the subsequent elements of the tree and this is a particularly tricky operation. So as you can see because we don’t have any way of asynchronously yielding the elements. It becomes a really ugly chunk of code. I mean I can go through this particular implementation. But essentially it’s just the preorder traversal as we use to do. Binary Tree Iterator with C++20 Co-routines In a previous example, I’ve deliberately skipped talking about how the traversal was actually implemented. Because if you go up and look at the PreOrderIterator::operator++, you can see that it’s a lot of manipulations around the current pointer \u0026 is very ugly. If you ever came across recursive pre-order traversal, you know that it is very intuitive \u0026 concise as follows: 1 2 3 4 5 6 void pre_order(root) { if (root == NULL) return; cout \u003c\u003c *root \u003c\u003c endl; pre_order(root-\u003eleft); pre_order(root-\u003eright); } Now the problem here for not having recursion is that you simply have an operator plus-plus. That gets executed at a time and you need to somehow preserve the state between those consecutive executions. But there was no way of suspending execution and then resuming till C++20. Because if you could do that, you could write a proper recursive algorithm that people could actually read. And instead, we have this monstrosity which I’m not going to go through. Since C++20, we have a feature in C++ by which we can write above algorithm in an idiomatic way where you can actually read the algorithm and it looks like the algorithm that reflects what you read in Wikipedia or computer science books and the way this is made possible is thanks to C++ coroutines[TODO]. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 #include #include using namespace std; /* Note: include file https://github.com/lewissbaker/cppcoro/blob/master/include/cppcoro/generator.hpp if you are not able to use `experimental::generator`. I have used clang 9.0.0 with cppcoro library for compilation */ template\u003ctypename T\u003e struct BinaryTree; template\u003ctypename T\u003e struct Node { T m_value = T(); Node\u003cT\u003e* m_parent{nullptr}; Node\u003cT\u003e* m_left{nullptr}; Node\u003cT\u003e* m_right{nullptr}; BinaryTree\u003cT\u003e* m_tree{nullptr}; Node(const T\u0026 v): m_value(v) {} Node(const T\u0026 v, Node\u003cT\u003e *const l, Node\u003cT\u003e *const r): m_value(v), m_left(l), m_right(r) { this-\u003em_left-\u003em_tree = this-\u003em_right-\u003em_tree = m_tree; this-\u003em_left-\u003em_parent = this-\u003em_right-\u003em_parent = this; } ~Node() { delete m_left; delete m_right; } void set_tree(BinaryTree\u003cT\u003e *t) { m_tree = t; if (m_left) m_left-\u003eset_tree(t); if (m_right) m_right-\u003eset_tree(t); } }; template\u003ctypename T\u003e struct BinaryTree { Node\u003cT\u003e *root = nullptr; BinaryTree(Node\u003cT\u003e *const r) : root{r} { root-\u003eset_tree(this); } ~BinaryTree() { delete root; } /* ------------------------------- C++ co-routines -------------------------------- */ experimental::generator\u003cNode\u003cT\u003e*\u003e pre_order() { return pre_order_impl(root); } experimental::generator\u003cNode\u003cT\u003e*\u003e pre_order_impl(Node\u003cT\u003e* node) { if (node) { for (auto x : pre_order_impl(node-\u003em_left)) co_yield x; for (auto y : pre_order_impl(node-\u003em_right)) co_yield y; co_yield node; } } /* ---------------------------------------------------------------------------------- */ }; int main() { // me // / \\ // mother father // / \\ // m'm m'f BinaryTree\u003cstring\u003e family { new Node\u003cstring\u003e{\"me\", new Node\u003cstring\u003e{\"mother\", new Node\u003cstring\u003e{\"mother's mother\"}, new Node\u003cstring\u003e{\"mother's father\"} }, new Node\u003cstring\u003e{\"father\"} } }; for (auto it: family.pre_order()) cout \u003c\u003c it-\u003em_value \u003c\u003c endl; return EXIT_SUCCESS; } /* mother's mother mother's father mother father me */ If you are unable to understand pre_order_impl, I would suggest you go through this talk. After that pre_order_impl would be self explainable. Moreover, I have compiled above snipped using cppcoro library with clang 9.0.0 on wandbox. Boost Iterator Facade Design Pattern in C++ If you have gone through my Facade Design Pattern article, you know that the first word in the above title i.e. Facade pronounces as `fa;sa;d`. Boost Iterator Facade is quite simply a very useful base class that you can add to an iterator very quickly and intuitively i.e. define the operations which make up that iterator. And to explain that I have taken a simple singly-linked list example as below: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #include #include #include #include using namespace std; struct Node { string m_value; Node* m_next = nullptr; Node(const string\u0026 v): m_value(v) {} Node(const string \u0026v, Node *const parent): m_value(v) { parent-\u003em_next = this; } }; struct ListIterator: boost::iterator_facade\u003cListIterator, Node, boost::forward_traversal_tag\u003e { Node* m_current; ListIterator(Node *const c = nullptr): m_current(c) {} friend class boost::iterator_core_access; void increment() { m_current = m_current-\u003em_next; } bool equal(const ListIterator \u0026other) const { return other.m_current == m_current; }; Node\u0026 dereference() const { return *m_current; } }; int main() { Node alpha { \"alpha\" }; Node beta { \"beta\", \u0026alpha }; Node gamma { \"gamma\", \u0026beta }; for_each(ListIterator{\u0026alpha}, ListIterator{}, [ ](const Node\u0026 n) { cout \u003c\u003c n.m_value \u003c\u003c endl; }); return EXIT_SUCCESS; } Some quick things to note here: Inheritance mention the type of traversal by boost::forward_traversal_tag. We have some override methods like increment(), equal(), dereference(), etc. You can read more about it in boost Iterator Facade Documentation.\nBenefits of Iterator Design Pattern Maintains good cohesion which means code is easier to understand, use \u0026 test since the iterator uses the Single Responsibility Principle and Open-Closed Principle. Loose coupling between data structures \u0026 algorithm as an algorithm does not have to know the way of traversal \u0026 even underlying data structure in some cases. You can extend the Iterators to traverse collection \u0026 collection of the collections. You can combine the Visitor \u0026 Iterator Design Pattern to traverse \u0026 execute some operation over the collection of different types. Summary by FAQs What is the purpose of Iterator Design Pattern?\nTo abstract away the underlying structure in which the data are kept for traversal \u0026 operations.\nHow do I use Iterator for traversing the collection of the collections?\nComposite design pattern\n","wordCount":"1918","inLanguage":"en","image":"http://localhost:1313/images/Iterator-Design-Pattern-in-Modern-C-vishal-chovatiya.png","datePublished":"2020-04-03T00:00:00Z","dateModified":"2020-04-03T00:00:00Z","author":{"@type":"Person","name":"Vishal Chovatiya"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/iterator-design-pattern-in-modern-cpp/"},"publisher":{"@type":"Organization","name":"Vishal Chovatiya","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/trident_favicon.webp"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Vishal Chovatiya (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Vishal Chovatiya</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/pages/vishal-chovatiya title="About Me"><span>About Me</span></a></li><li><a href=http://localhost:1313/pages/start-here title="Start Here"><span>Start Here</span></a></li><li><a href=http://localhost:1313/posts/ title=Latest><span>Latest</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Iterator Design Pattern in Modern C++</h1><div class=post-meta><span title='2020-04-03 00:00:00 +0000 UTC'>April 3, 2020</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;1918 words&nbsp;·&nbsp;Vishal Chovatiya&nbsp;|&nbsp;<a href=https://github.com/vishalchovatiya/blog/blob/main/vishalchovatiya/content/posts/iterator-design-pattern-in-modern-cpp.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=http://localhost:1313/images/Iterator-Design-Pattern-in-Modern-C-vishal-chovatiya.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#intent>Intent</a></li><li><a href=#iterator-design-pattern-examples-in-c>Iterator Design Pattern Examples in C++</a><ul><li><a href=#binary-tree-iterator>Binary Tree Iterator</a></li><li><a href=#binary-tree-iterator-with-c20-co-routines>Binary Tree Iterator with C++20 Co-routines</a></li><li><a href=#boost-iterator-facade-design-pattern-in-c>Boost Iterator Facade Design Pattern in C++</a></li></ul></li><li><a href=#benefits-of-iterator-design-pattern>Benefits of Iterator Design Pattern</a></li><li><a href=#summary-by-faqs>Summary by FAQs</a></li></ul></nav></div></details></div><div class=post-content><p>Iterator Design Pattern in Modern C++ is a heavily used pattern i.e. <strong><em>provides facility to traverse data containers sophistically</em></strong>. For simplicity, you can consider a pointer moving across an array, but the real magic comes when you get to the next element of a container, in that case, you need not know anything about how the container is constructed(like sequential(not necessarily be contiguous), associative or hashed). This is handled by the iterator.</p><p>By the way, If you haven’t check out my other articles on Behavioural Design Patterns, then here is the list:</p><ol><li><a href=/posts//chain-of-responsibility-design-pattern-in-modern-cpp/>Chain of responsibility</a></li><li><a href=/posts//command-design-pattern-in-modern-cpp/>Command</a></li><li><a href=/posts//interpreter-design-pattern-in-modern-cpp/>Interpreter</a></li><li><a href=/posts//iterator-design-pattern-in-modern-cpp/>Iterator</a></li><li><a href=/posts//mediator-design-pattern-in-modern-cpp/>Mediator</a></li><li><a href=/posts//memento-design-pattern-in-modern-cpp/>Memento</a></li><li><a href=/posts//observer-design-pattern-in-modern-cpp/>Observer</a></li><li><a href=/posts//state-design-pattern-in-modern-cpp/>State</a></li><li><a href=/posts//strategy-design-pattern-in-modern-cpp/>Strategy</a></li><li><a href=/posts//template-method-design-pattern-in-modern-cpp/>Template Method</a></li><li><a href=/posts//double-dispatch-visitor-design-pattern-in-modern-cpp/>Visitor</a></li></ol><p>The code snippets you see throughout this series of articles are simplified not sophisticated. So you often see me not using keywords like <code>override</code>, <code>final</code>, <code>public</code>(while inheritance) just to make code compact & consumable(most of the time) in single standard screen size. I also prefer <code>struct</code> instead of <code>class</code> just to save line by not writing &ldquo;<code>public:</code>&rdquo; sometimes and also miss <a href=/posts//part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/>virtual destructor</a>, constructor, <a href=/posts//all-about-copy-constructor-in-cpp-with-example/>copy constructor</a>, prefix <code>std::</code>, deleting dynamic memory, intentionally. I also consider myself a pragmatic person who wants to convey an idea in the simplest way possible rather than the standard way or using Jargons.</p><p><strong><em>Note:</em></strong></p><ul><li>If you stumbled here directly, then I would suggest you go through <a href=/posts//what-is-design-pattern/>What is design pattern?</a> first, even if it is trivial. I believe it will encourage you to explore more on this topic.</li><li>All of this code you encounter in this series of articles are compiled using C++20(though I have used <a href=/posts//21-new-features-of-modern-cpp-to-use-in-your-project/>Modern C++</a> features up to C++17 in most cases). So if you don&rsquo;t have access to the latest compiler you can use <a href=https://wandbox.org/>https://wandbox.org/</a> which has preinstalled boost library as well.</li></ul><h2 id=intent>Intent<a hidden class=anchor aria-hidden=true href=#intent>#</a></h2><blockquote><p><strong><em>To facilitate the traversal of data structure.</em></strong></p></blockquote><ul><li>Iterator is a core functionality of various containers provided in the standard C++ library. There are lots of cases where you&rsquo;re using iterators without really knowing what you&rsquo;re using them. For instance, if you use a <a href=/posts/21-new-features-of-modern-cpp-to-use-in-your-project/#Range-based-for-loops>range-based for-loop</a> what you&rsquo;re essentially using is begin, end & operator++ but you don&rsquo;t see any of it.</li><li>Another example is coroutines that&rsquo;s also something where you have a method which returns a generator but the generator actually gives you the ability to iterate itself and you don&rsquo;t see the iterators explicitly in this case either.</li></ul><h2 id=iterator-design-pattern-examples-in-c>Iterator Design Pattern Examples in C++<a hidden class=anchor aria-hidden=true href=#iterator-design-pattern-examples-in-c>#</a></h2><ul><li>A typical example to illustrate iterator is to use single dimensional array & traverse it using pointer(with the same <a href=/posts/cpp-type-casting-with-example-for-c-developers/>type</a> as the element of the array). But this is a very simple & straight forward scenario where you can not imagine how important iterators are? So we will see the example of basic associative container i.e. Binary Tree.</li></ul><h3 id=binary-tree-iterator>Binary Tree Iterator<a hidden class=anchor aria-hidden=true href=#binary-tree-iterator>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>  1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>  2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>  3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>  4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>  5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>  6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>  7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>  8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9>  9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10> 10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11> 11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12> 12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13> 13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14> 14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15> 15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16> 16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17> 17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18> 18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19> 19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20> 20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21> 21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22> 22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23> 23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24> 24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25> 25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26> 26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27> 27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28> 28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29> 29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30> 30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31> 31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32> 32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33> 33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34> 34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35> 35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36> 36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37> 37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38> 38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39> 39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40> 40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41> 41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42> 42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43> 43</a>
</span><span class=lnt id=hl-0-44><a class=lnlinks href=#hl-0-44> 44</a>
</span><span class=lnt id=hl-0-45><a class=lnlinks href=#hl-0-45> 45</a>
</span><span class=lnt id=hl-0-46><a class=lnlinks href=#hl-0-46> 46</a>
</span><span class=lnt id=hl-0-47><a class=lnlinks href=#hl-0-47> 47</a>
</span><span class=lnt id=hl-0-48><a class=lnlinks href=#hl-0-48> 48</a>
</span><span class=lnt id=hl-0-49><a class=lnlinks href=#hl-0-49> 49</a>
</span><span class=lnt id=hl-0-50><a class=lnlinks href=#hl-0-50> 50</a>
</span><span class=lnt id=hl-0-51><a class=lnlinks href=#hl-0-51> 51</a>
</span><span class=lnt id=hl-0-52><a class=lnlinks href=#hl-0-52> 52</a>
</span><span class=lnt id=hl-0-53><a class=lnlinks href=#hl-0-53> 53</a>
</span><span class=lnt id=hl-0-54><a class=lnlinks href=#hl-0-54> 54</a>
</span><span class=lnt id=hl-0-55><a class=lnlinks href=#hl-0-55> 55</a>
</span><span class=lnt id=hl-0-56><a class=lnlinks href=#hl-0-56> 56</a>
</span><span class=lnt id=hl-0-57><a class=lnlinks href=#hl-0-57> 57</a>
</span><span class=lnt id=hl-0-58><a class=lnlinks href=#hl-0-58> 58</a>
</span><span class=lnt id=hl-0-59><a class=lnlinks href=#hl-0-59> 59</a>
</span><span class=lnt id=hl-0-60><a class=lnlinks href=#hl-0-60> 60</a>
</span><span class=lnt id=hl-0-61><a class=lnlinks href=#hl-0-61> 61</a>
</span><span class=lnt id=hl-0-62><a class=lnlinks href=#hl-0-62> 62</a>
</span><span class=lnt id=hl-0-63><a class=lnlinks href=#hl-0-63> 63</a>
</span><span class=lnt id=hl-0-64><a class=lnlinks href=#hl-0-64> 64</a>
</span><span class=lnt id=hl-0-65><a class=lnlinks href=#hl-0-65> 65</a>
</span><span class=lnt id=hl-0-66><a class=lnlinks href=#hl-0-66> 66</a>
</span><span class=lnt id=hl-0-67><a class=lnlinks href=#hl-0-67> 67</a>
</span><span class=lnt id=hl-0-68><a class=lnlinks href=#hl-0-68> 68</a>
</span><span class=lnt id=hl-0-69><a class=lnlinks href=#hl-0-69> 69</a>
</span><span class=lnt id=hl-0-70><a class=lnlinks href=#hl-0-70> 70</a>
</span><span class=lnt id=hl-0-71><a class=lnlinks href=#hl-0-71> 71</a>
</span><span class=lnt id=hl-0-72><a class=lnlinks href=#hl-0-72> 72</a>
</span><span class=lnt id=hl-0-73><a class=lnlinks href=#hl-0-73> 73</a>
</span><span class=lnt id=hl-0-74><a class=lnlinks href=#hl-0-74> 74</a>
</span><span class=lnt id=hl-0-75><a class=lnlinks href=#hl-0-75> 75</a>
</span><span class=lnt id=hl-0-76><a class=lnlinks href=#hl-0-76> 76</a>
</span><span class=lnt id=hl-0-77><a class=lnlinks href=#hl-0-77> 77</a>
</span><span class=lnt id=hl-0-78><a class=lnlinks href=#hl-0-78> 78</a>
</span><span class=lnt id=hl-0-79><a class=lnlinks href=#hl-0-79> 79</a>
</span><span class=lnt id=hl-0-80><a class=lnlinks href=#hl-0-80> 80</a>
</span><span class=lnt id=hl-0-81><a class=lnlinks href=#hl-0-81> 81</a>
</span><span class=lnt id=hl-0-82><a class=lnlinks href=#hl-0-82> 82</a>
</span><span class=lnt id=hl-0-83><a class=lnlinks href=#hl-0-83> 83</a>
</span><span class=lnt id=hl-0-84><a class=lnlinks href=#hl-0-84> 84</a>
</span><span class=lnt id=hl-0-85><a class=lnlinks href=#hl-0-85> 85</a>
</span><span class=lnt id=hl-0-86><a class=lnlinks href=#hl-0-86> 86</a>
</span><span class=lnt id=hl-0-87><a class=lnlinks href=#hl-0-87> 87</a>
</span><span class=lnt id=hl-0-88><a class=lnlinks href=#hl-0-88> 88</a>
</span><span class=lnt id=hl-0-89><a class=lnlinks href=#hl-0-89> 89</a>
</span><span class=lnt id=hl-0-90><a class=lnlinks href=#hl-0-90> 90</a>
</span><span class=lnt id=hl-0-91><a class=lnlinks href=#hl-0-91> 91</a>
</span><span class=lnt id=hl-0-92><a class=lnlinks href=#hl-0-92> 92</a>
</span><span class=lnt id=hl-0-93><a class=lnlinks href=#hl-0-93> 93</a>
</span><span class=lnt id=hl-0-94><a class=lnlinks href=#hl-0-94> 94</a>
</span><span class=lnt id=hl-0-95><a class=lnlinks href=#hl-0-95> 95</a>
</span><span class=lnt id=hl-0-96><a class=lnlinks href=#hl-0-96> 96</a>
</span><span class=lnt id=hl-0-97><a class=lnlinks href=#hl-0-97> 97</a>
</span><span class=lnt id=hl-0-98><a class=lnlinks href=#hl-0-98> 98</a>
</span><span class=lnt id=hl-0-99><a class=lnlinks href=#hl-0-99> 99</a>
</span><span class=lnt id=hl-0-100><a class=lnlinks href=#hl-0-100>100</a>
</span><span class=lnt id=hl-0-101><a class=lnlinks href=#hl-0-101>101</a>
</span><span class=lnt id=hl-0-102><a class=lnlinks href=#hl-0-102>102</a>
</span><span class=lnt id=hl-0-103><a class=lnlinks href=#hl-0-103>103</a>
</span><span class=lnt id=hl-0-104><a class=lnlinks href=#hl-0-104>104</a>
</span><span class=lnt id=hl-0-105><a class=lnlinks href=#hl-0-105>105</a>
</span><span class=lnt id=hl-0-106><a class=lnlinks href=#hl-0-106>106</a>
</span><span class=lnt id=hl-0-107><a class=lnlinks href=#hl-0-107>107</a>
</span><span class=lnt id=hl-0-108><a class=lnlinks href=#hl-0-108>108</a>
</span><span class=lnt id=hl-0-109><a class=lnlinks href=#hl-0-109>109</a>
</span><span class=lnt id=hl-0-110><a class=lnlinks href=#hl-0-110>110</a>
</span><span class=lnt id=hl-0-111><a class=lnlinks href=#hl-0-111>111</a>
</span><span class=lnt id=hl-0-112><a class=lnlinks href=#hl-0-112>112</a>
</span><span class=lnt id=hl-0-113><a class=lnlinks href=#hl-0-113>113</a>
</span><span class=lnt id=hl-0-114><a class=lnlinks href=#hl-0-114>114</a>
</span><span class=lnt id=hl-0-115><a class=lnlinks href=#hl-0-115>115</a>
</span><span class=lnt id=hl-0-116><a class=lnlinks href=#hl-0-116>116</a>
</span><span class=lnt id=hl-0-117><a class=lnlinks href=#hl-0-117>117</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>BinaryTree</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>T</span>                   <span class=n>m_value</span> <span class=o>=</span> <span class=n>T</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>            <span class=n>m_parent</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>            <span class=n>m_left</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>            <span class=n>m_right</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>BinaryTree</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>      <span class=n>m_tree</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=p>(</span><span class=k>const</span> <span class=n>T</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>)</span><span class=o>:</span> <span class=n>m_value</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=p>(</span><span class=k>const</span> <span class=n>T</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=n>l</span><span class=p>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=n>r</span><span class=p>)</span><span class=o>:</span> <span class=n>m_value</span><span class=p>(</span><span class=n>v</span><span class=p>),</span> <span class=n>m_left</span><span class=p>(</span><span class=n>l</span><span class=p>),</span> <span class=n>m_right</span><span class=p>(</span><span class=n>r</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=o>-&gt;</span><span class=n>m_tree</span> <span class=o>=</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=o>-&gt;</span><span class=n>m_tree</span> <span class=o>=</span> <span class=n>m_tree</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=o>-&gt;</span><span class=n>m_parent</span> <span class=o>=</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=o>-&gt;</span><span class=n>m_parent</span> <span class=o>=</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>Node</span><span class=p>()</span> <span class=p>{</span> <span class=k>delete</span> <span class=n>m_left</span><span class=p>;</span> <span class=k>delete</span> <span class=n>m_right</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>set_tree</span><span class=p>(</span><span class=n>BinaryTree</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m_tree</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>m_left</span><span class=p>)</span> <span class=n>m_left</span><span class=o>-&gt;</span><span class=n>set_tree</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>m_right</span><span class=p>)</span> <span class=n>m_right</span><span class=o>-&gt;</span><span class=n>set_tree</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>BinaryTree</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>        <span class=n>m_root</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>BinaryTree</span><span class=p>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=n>r</span><span class=p>)</span> <span class=o>:</span> <span class=n>m_root</span><span class=p>{</span><span class=n>r</span><span class=p>}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m_root</span><span class=o>-&gt;</span><span class=n>set_tree</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>BinaryTree</span><span class=p>()</span> <span class=p>{</span> <span class=k>delete</span> <span class=n>m_root</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/* ---------------------------- Iterator Implementation ----------------------------- */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>U</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=nc>PreOrderIterator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>U</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>current</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>PreOrderIterator</span><span class=p>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>U</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>c</span><span class=p>)</span><span class=o>:</span> <span class=n>current</span><span class=p>(</span><span class=n>c</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>bool</span> <span class=k>operator</span><span class=o>!=</span><span class=p>(</span><span class=k>const</span> <span class=n>PreOrderIterator</span><span class=o>&lt;</span><span class=n>U</span><span class=o>&gt;&amp;</span> <span class=n>rhs</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>current</span> <span class=o>!=</span> <span class=n>rhs</span><span class=p>.</span><span class=n>current</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>PreOrderIterator</span><span class=o>&lt;</span><span class=n>U</span><span class=o>&gt;&amp;</span> <span class=k>operator</span><span class=o>++</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>current</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>current</span> <span class=o>=</span> <span class=n>current</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>while</span> <span class=p>(</span><span class=n>current</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>current</span> <span class=o>=</span> <span class=n>current</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=n>current</span><span class=o>-&gt;</span><span class=n>m_parent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>while</span> <span class=p>(</span><span class=n>p</span> <span class=o>&amp;&amp;</span> <span class=n>current</span> <span class=o>==</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>current</span> <span class=o>=</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>p</span> <span class=o>=</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>m_parent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=n>current</span> <span class=o>=</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>U</span><span class=o>&gt;&amp;</span> <span class=k>operator</span><span class=o>*</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=o>*</span><span class=n>current</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>iterator</span> <span class=o>=</span> <span class=n>PreOrderIterator</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>iterator</span> <span class=nf>begin</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>n</span> <span class=o>=</span> <span class=n>m_root</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=p>(</span><span class=n>n</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>n</span> <span class=o>=</span> <span class=n>n</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>iterator</span><span class=p>{</span><span class=n>n</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>iterator</span> <span class=nf>end</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>iterator</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* ---------------------------------------------------------------------------------- */</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//         me
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//        /  \
</span></span></span><span class=line><span class=cl><span class=c1>    //   mother   father
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//      / \
</span></span></span><span class=line><span class=cl><span class=c1>    //   m&#39;m   m&#39;f
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>BinaryTree</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span> <span class=n>family</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;me&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;mother&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;mother&#39;s mother&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;mother&#39;s father&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;father&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>for_each</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>family</span><span class=p>),</span> <span class=n>end</span><span class=p>(</span><span class=n>family</span><span class=p>),</span> <span class=c1>// Works with STL algo
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;&amp;</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>n</span><span class=p>.</span><span class=n>m_value</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>const</span> <span class=k>auto</span><span class=o>&amp;</span> <span class=nl>it</span><span class=p>:</span> <span class=n>family</span><span class=p>)</span> <span class=c1>// Works with range-based for loop as well
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>it</span><span class=p>.</span><span class=n>m_value</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cm>/*  
</span></span></span><span class=line><span class=cl><span class=cm>mother&#39;s mother
</span></span></span><span class=line><span class=cl><span class=cm>mother
</span></span></span><span class=line><span class=cl><span class=cm>mother&#39;s father
</span></span></span><span class=line><span class=cl><span class=cm>me
</span></span></span><span class=line><span class=cl><span class=cm>father
</span></span></span><span class=line><span class=cl><span class=cm>mother&#39;s mother
</span></span></span><span class=line><span class=cl><span class=cm>mother
</span></span></span><span class=line><span class=cl><span class=cm>mother&#39;s father
</span></span></span><span class=line><span class=cl><span class=cm>me
</span></span></span><span class=line><span class=cl><span class=cm>father
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>The most difficult thing in the above example is implementing <code>PreOrderIterator::operator++</code>. So when we&rsquo;re traversing the tree in pre-order. What&rsquo;s happening is every time somebody calls plus-plus we need to move to the subsequent elements of the tree and this is a particularly tricky operation.</li><li>So as you can see because we don&rsquo;t have any way of asynchronously yielding the elements. It becomes a really ugly chunk of code. I mean I can go through this particular implementation. But essentially it&rsquo;s just the preorder traversal as we use to do.</li></ul><h3 id=binary-tree-iterator-with-c20-co-routines>Binary Tree Iterator with C++20 Co-routines<a hidden class=anchor aria-hidden=true href=#binary-tree-iterator-with-c20-co-routines>#</a></h3><ul><li>In a previous example, I&rsquo;ve deliberately skipped talking about how the traversal was actually implemented. Because if you go up and look at the <code>PreOrderIterator::operator++</code>, you can see that it&rsquo;s a lot of manipulations around the <code>current</code> pointer & is very ugly.</li><li>If you ever came across recursive pre-order traversal, you know that it is very intuitive & concise as follows:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>void</span> <span class=nf>pre_order</span><span class=p>(</span><span class=n>root</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>root</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>    
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=o>*</span><span class=n>root</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>pre_order</span><span class=p>(</span><span class=n>root</span><span class=o>-&gt;</span><span class=n>left</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>pre_order</span><span class=p>(</span><span class=n>root</span><span class=o>-&gt;</span><span class=n>right</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span></code></pre></td></tr></table></div></div><ul><li>Now the problem here for not having recursion is that you simply have an operator plus-plus. That gets executed at a time and you need to somehow preserve the state between those consecutive executions.</li><li>But there was no way of suspending execution and then resuming till C++20. Because if you could do that, you could write a proper recursive algorithm that people could actually read. And instead, we have this monstrosity which I&rsquo;m not going to go through.</li><li>Since C++20, we have a feature in C++ by which we can write above algorithm in an idiomatic way where you can actually read the algorithm and it looks like the algorithm that reflects what you read in Wikipedia or computer science books and the way this is made possible is thanks to C++ coroutines[TODO].</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span><span class=lnt id=hl-2-33><a class=lnlinks href=#hl-2-33>33</a>
</span><span class=lnt id=hl-2-34><a class=lnlinks href=#hl-2-34>34</a>
</span><span class=lnt id=hl-2-35><a class=lnlinks href=#hl-2-35>35</a>
</span><span class=lnt id=hl-2-36><a class=lnlinks href=#hl-2-36>36</a>
</span><span class=lnt id=hl-2-37><a class=lnlinks href=#hl-2-37>37</a>
</span><span class=lnt id=hl-2-38><a class=lnlinks href=#hl-2-38>38</a>
</span><span class=lnt id=hl-2-39><a class=lnlinks href=#hl-2-39>39</a>
</span><span class=lnt id=hl-2-40><a class=lnlinks href=#hl-2-40>40</a>
</span><span class=lnt id=hl-2-41><a class=lnlinks href=#hl-2-41>41</a>
</span><span class=lnt id=hl-2-42><a class=lnlinks href=#hl-2-42>42</a>
</span><span class=lnt id=hl-2-43><a class=lnlinks href=#hl-2-43>43</a>
</span><span class=lnt id=hl-2-44><a class=lnlinks href=#hl-2-44>44</a>
</span><span class=lnt id=hl-2-45><a class=lnlinks href=#hl-2-45>45</a>
</span><span class=lnt id=hl-2-46><a class=lnlinks href=#hl-2-46>46</a>
</span><span class=lnt id=hl-2-47><a class=lnlinks href=#hl-2-47>47</a>
</span><span class=lnt id=hl-2-48><a class=lnlinks href=#hl-2-48>48</a>
</span><span class=lnt id=hl-2-49><a class=lnlinks href=#hl-2-49>49</a>
</span><span class=lnt id=hl-2-50><a class=lnlinks href=#hl-2-50>50</a>
</span><span class=lnt id=hl-2-51><a class=lnlinks href=#hl-2-51>51</a>
</span><span class=lnt id=hl-2-52><a class=lnlinks href=#hl-2-52>52</a>
</span><span class=lnt id=hl-2-53><a class=lnlinks href=#hl-2-53>53</a>
</span><span class=lnt id=hl-2-54><a class=lnlinks href=#hl-2-54>54</a>
</span><span class=lnt id=hl-2-55><a class=lnlinks href=#hl-2-55>55</a>
</span><span class=lnt id=hl-2-56><a class=lnlinks href=#hl-2-56>56</a>
</span><span class=lnt id=hl-2-57><a class=lnlinks href=#hl-2-57>57</a>
</span><span class=lnt id=hl-2-58><a class=lnlinks href=#hl-2-58>58</a>
</span><span class=lnt id=hl-2-59><a class=lnlinks href=#hl-2-59>59</a>
</span><span class=lnt id=hl-2-60><a class=lnlinks href=#hl-2-60>60</a>
</span><span class=lnt id=hl-2-61><a class=lnlinks href=#hl-2-61>61</a>
</span><span class=lnt id=hl-2-62><a class=lnlinks href=#hl-2-62>62</a>
</span><span class=lnt id=hl-2-63><a class=lnlinks href=#hl-2-63>63</a>
</span><span class=lnt id=hl-2-64><a class=lnlinks href=#hl-2-64>64</a>
</span><span class=lnt id=hl-2-65><a class=lnlinks href=#hl-2-65>65</a>
</span><span class=lnt id=hl-2-66><a class=lnlinks href=#hl-2-66>66</a>
</span><span class=lnt id=hl-2-67><a class=lnlinks href=#hl-2-67>67</a>
</span><span class=lnt id=hl-2-68><a class=lnlinks href=#hl-2-68>68</a>
</span><span class=lnt id=hl-2-69><a class=lnlinks href=#hl-2-69>69</a>
</span><span class=lnt id=hl-2-70><a class=lnlinks href=#hl-2-70>70</a>
</span><span class=lnt id=hl-2-71><a class=lnlinks href=#hl-2-71>71</a>
</span><span class=lnt id=hl-2-72><a class=lnlinks href=#hl-2-72>72</a>
</span><span class=lnt id=hl-2-73><a class=lnlinks href=#hl-2-73>73</a>
</span><span class=lnt id=hl-2-74><a class=lnlinks href=#hl-2-74>74</a>
</span><span class=lnt id=hl-2-75><a class=lnlinks href=#hl-2-75>75</a>
</span><span class=lnt id=hl-2-76><a class=lnlinks href=#hl-2-76>76</a>
</span><span class=lnt id=hl-2-77><a class=lnlinks href=#hl-2-77>77</a>
</span><span class=lnt id=hl-2-78><a class=lnlinks href=#hl-2-78>78</a>
</span><span class=lnt id=hl-2-79><a class=lnlinks href=#hl-2-79>79</a>
</span><span class=lnt id=hl-2-80><a class=lnlinks href=#hl-2-80>80</a>
</span><span class=lnt id=hl-2-81><a class=lnlinks href=#hl-2-81>81</a>
</span><span class=lnt id=hl-2-82><a class=lnlinks href=#hl-2-82>82</a>
</span><span class=lnt id=hl-2-83><a class=lnlinks href=#hl-2-83>83</a>
</span><span class=lnt id=hl-2-84><a class=lnlinks href=#hl-2-84>84</a>
</span><span class=lnt id=hl-2-85><a class=lnlinks href=#hl-2-85>85</a>
</span><span class=lnt id=hl-2-86><a class=lnlinks href=#hl-2-86>86</a>
</span><span class=lnt id=hl-2-87><a class=lnlinks href=#hl-2-87>87</a>
</span><span class=lnt id=hl-2-88><a class=lnlinks href=#hl-2-88>88</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;experimental/coroutine&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Note:
</span></span></span><span class=line><span class=cl><span class=cm>include file https://github.com/lewissbaker/cppcoro/blob/master/include/cppcoro/generator.hpp
</span></span></span><span class=line><span class=cl><span class=cm>if you are not able to use `experimental::generator`.
</span></span></span><span class=line><span class=cl><span class=cm>I have used clang 9.0.0 with cppcoro library for compilation
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>BinaryTree</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>T</span>                   <span class=n>m_value</span> <span class=o>=</span> <span class=n>T</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>            <span class=n>m_parent</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>            <span class=n>m_left</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>            <span class=n>m_right</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>BinaryTree</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span>      <span class=n>m_tree</span><span class=p>{</span><span class=k>nullptr</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=p>(</span><span class=k>const</span> <span class=n>T</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>)</span><span class=o>:</span> <span class=n>m_value</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=p>(</span><span class=k>const</span> <span class=n>T</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=n>l</span><span class=p>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=n>r</span><span class=p>)</span><span class=o>:</span> <span class=n>m_value</span><span class=p>(</span><span class=n>v</span><span class=p>),</span> <span class=n>m_left</span><span class=p>(</span><span class=n>l</span><span class=p>),</span> <span class=n>m_right</span><span class=p>(</span><span class=n>r</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=o>-&gt;</span><span class=n>m_tree</span> <span class=o>=</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=o>-&gt;</span><span class=n>m_tree</span> <span class=o>=</span> <span class=n>m_tree</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=o>-&gt;</span><span class=n>m_parent</span> <span class=o>=</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=o>-&gt;</span><span class=n>m_parent</span> <span class=o>=</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>Node</span><span class=p>()</span> <span class=p>{</span> <span class=k>delete</span> <span class=n>m_left</span><span class=p>;</span> <span class=k>delete</span> <span class=n>m_right</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>set_tree</span><span class=p>(</span><span class=n>BinaryTree</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m_tree</span> <span class=o>=</span> <span class=n>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>m_left</span><span class=p>)</span> <span class=n>m_left</span><span class=o>-&gt;</span><span class=n>set_tree</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>m_right</span><span class=p>)</span> <span class=n>m_right</span><span class=o>-&gt;</span><span class=n>set_tree</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>BinaryTree</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=n>root</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>BinaryTree</span><span class=p>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=n>r</span><span class=p>)</span> <span class=o>:</span> <span class=n>root</span><span class=p>{</span><span class=n>r</span><span class=p>}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>root</span><span class=o>-&gt;</span><span class=n>set_tree</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>~</span><span class=n>BinaryTree</span><span class=p>()</span> <span class=p>{</span> <span class=k>delete</span> <span class=n>root</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/* ------------------------------- C++ co-routines -------------------------------- */</span>
</span></span><span class=line><span class=cl>    <span class=n>experimental</span><span class=o>::</span><span class=n>generator</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*&gt;</span> <span class=n>pre_order</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=nf>pre_order_impl</span><span class=p>(</span><span class=n>root</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>experimental</span><span class=o>::</span><span class=n>generator</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*&gt;</span> <span class=n>pre_order_impl</span><span class=p>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span> <span class=n>node</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>node</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>x</span> <span class=p>:</span> <span class=n>pre_order_impl</span><span class=p>(</span><span class=n>node</span><span class=o>-&gt;</span><span class=n>m_left</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=k>co_yield</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>y</span> <span class=p>:</span> <span class=n>pre_order_impl</span><span class=p>(</span><span class=n>node</span><span class=o>-&gt;</span><span class=n>m_right</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=k>co_yield</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>co_yield</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* ---------------------------------------------------------------------------------- */</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//         me
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//        /  \
</span></span></span><span class=line><span class=cl><span class=c1>    //   mother   father
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//      / \
</span></span></span><span class=line><span class=cl><span class=c1>    //   m&#39;m   m&#39;f
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>BinaryTree</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span> <span class=n>family</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;me&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;mother&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;mother&#39;s mother&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;mother&#39;s father&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>{</span><span class=s>&#34;father&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>it</span><span class=p>:</span> <span class=n>family</span><span class=p>.</span><span class=n>pre_order</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>it</span><span class=o>-&gt;</span><span class=n>m_value</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>mother&#39;s mother
</span></span></span><span class=line><span class=cl><span class=cm>mother&#39;s father
</span></span></span><span class=line><span class=cl><span class=cm>mother
</span></span></span><span class=line><span class=cl><span class=cm>father
</span></span></span><span class=line><span class=cl><span class=cm>me
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>If you are unable to understand <code>pre_order_impl</code>, I would suggest you go through <a href="https://www.youtube.com/watch?v=ZTqHjjm86Bw&amp;t=1431s">this talk</a>. After that <code>pre_order_impl</code> would be self explainable.</li><li>Moreover, I have compiled above snipped using <a href=https://github.com/lewissbaker/cppcoro>cppcoro library</a> with clang 9.0.0 on <a href=https://wandbox.org/>wandbox</a>.</li></ul><h3 id=boost-iterator-facade-design-pattern-in-c>Boost Iterator Facade Design Pattern in C++<a hidden class=anchor aria-hidden=true href=#boost-iterator-facade-design-pattern-in-c>#</a></h3><ul><li>If you have gone through my <a href=/posts/facade-design-pattern-in-modern-cpp/>Facade Design Pattern</a> article, you know that the first word in the above title i.e. Facade pronounces as `fa;sa;d`.</li><li>Boost Iterator Facade is quite simply a very useful base class that you can add to an iterator very quickly and intuitively i.e. define the operations which make up that iterator. And to explain that I have taken a simple singly-linked list example as below:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span><span class=lnt id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a>
</span><span class=lnt id=hl-3-32><a class=lnlinks href=#hl-3-32>32</a>
</span><span class=lnt id=hl-3-33><a class=lnlinks href=#hl-3-33>33</a>
</span><span class=lnt id=hl-3-34><a class=lnlinks href=#hl-3-34>34</a>
</span><span class=lnt id=hl-3-35><a class=lnlinks href=#hl-3-35>35</a>
</span><span class=lnt id=hl-3-36><a class=lnlinks href=#hl-3-36>36</a>
</span><span class=lnt id=hl-3-37><a class=lnlinks href=#hl-3-37>37</a>
</span><span class=lnt id=hl-3-38><a class=lnlinks href=#hl-3-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;algorithm&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;boost/iterator/iterator_facade.hpp&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span>      <span class=n>m_value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>*</span>       <span class=n>m_next</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=p>(</span><span class=k>const</span> <span class=n>string</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>)</span><span class=o>:</span> <span class=n>m_value</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=p>(</span><span class=k>const</span> <span class=n>string</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>,</span> <span class=n>Node</span> <span class=o>*</span><span class=k>const</span> <span class=n>parent</span><span class=p>)</span><span class=o>:</span> <span class=n>m_value</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=p>{</span> <span class=n>parent</span><span class=o>-&gt;</span><span class=n>m_next</span> <span class=o>=</span> <span class=k>this</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>ListIterator</span><span class=o>:</span> <span class=n>boost</span><span class=o>::</span><span class=n>iterator_facade</span><span class=o>&lt;</span><span class=n>ListIterator</span><span class=p>,</span> <span class=n>Node</span><span class=p>,</span> <span class=n>boost</span><span class=o>::</span><span class=n>forward_traversal_tag</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>*</span>       <span class=n>m_current</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ListIterator</span><span class=p>(</span><span class=n>Node</span> <span class=o>*</span><span class=k>const</span> <span class=n>c</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>)</span><span class=o>:</span> <span class=n>m_current</span><span class=p>(</span><span class=n>c</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>friend</span> <span class=k>class</span> <span class=nc>boost</span><span class=o>::</span><span class=n>iterator_core_access</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>increment</span><span class=p>()</span> <span class=p>{</span> <span class=n>m_current</span> <span class=o>=</span> <span class=n>m_current</span><span class=o>-&gt;</span><span class=n>m_next</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>equal</span><span class=p>(</span><span class=k>const</span> <span class=n>ListIterator</span> <span class=o>&amp;</span><span class=n>other</span><span class=p>)</span> <span class=k>const</span> <span class=p>{</span> <span class=k>return</span> <span class=n>other</span><span class=p>.</span><span class=n>m_current</span> <span class=o>==</span> <span class=n>m_current</span><span class=p>;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&amp;</span> <span class=n>dereference</span><span class=p>()</span> <span class=k>const</span> <span class=p>{</span> <span class=k>return</span> <span class=o>*</span><span class=n>m_current</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span> <span class=n>alpha</span> <span class=p>{</span> <span class=s>&#34;alpha&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span> <span class=n>beta</span> <span class=p>{</span> <span class=s>&#34;beta&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>alpha</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span> <span class=n>gamma</span> <span class=p>{</span> <span class=s>&#34;gamma&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>beta</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>for_each</span><span class=p>(</span><span class=n>ListIterator</span><span class=p>{</span><span class=o>&amp;</span><span class=n>alpha</span><span class=p>},</span> <span class=n>ListIterator</span><span class=p>{},</span> 
</span></span><span class=line><span class=cl>	<span class=p>[</span> <span class=p>](</span><span class=k>const</span> <span class=n>Node</span><span class=o>&amp;</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>n</span><span class=p>.</span><span class=n>m_value</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>EXIT_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Some quick things to note here:<ul><li>Inheritance mention the type of traversal by <code>boost::forward_traversal_tag</code>.</li><li>We have some override methods like <code>increment()</code>, <code>equal()</code>, <code>dereference()</code>, etc.</li></ul></li></ul><p>You can read more about it in boost <a href=https://www.boost.org/doc/libs/1_65_0/libs/iterator/doc/iterator_facade.html>Iterator Facade Documentation</a>.</p><h2 id=benefits-of-iterator-design-pattern>Benefits of Iterator Design Pattern<a hidden class=anchor aria-hidden=true href=#benefits-of-iterator-design-pattern>#</a></h2><ol><li>Maintains good cohesion which means code is easier to understand, use & test since the iterator uses the <a href=/posts/single-responsibility-principle-in-cpp-solid-as-a-rock/>Single Responsibility Principle</a> and <a href=/posts/open-closed-principle-in-cpp-solid-as-a-rock/>Open-Closed Principle</a>.</li><li>Loose coupling between data structures & algorithm as an algorithm does not have to know the way of traversal & even underlying data structure in some cases.</li><li>You can extend the Iterators to traverse collection & collection of the collections.</li><li>You can combine the Visitor & Iterator Design Pattern to traverse & execute some operation over the collection of different types.</li></ol><h2 id=summary-by-faqs>Summary by FAQs<a hidden class=anchor aria-hidden=true href=#summary-by-faqs>#</a></h2><p><strong>What is the purpose of Iterator Design Pattern?</strong></p><p>To abstract away the underlying structure in which the data are kept for traversal & operations.</p><p><strong>How do I use Iterator for traversing the collection of the collections?</strong></p><p><a href=/posts/composite-design-pattern-in-modern-cpp/>Composite design pattern</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/advantages-and-disadvantages-of-iterator-design-pattern/>Advantages-and-Disadvantages-of-Iterator-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/benefits-of-iterator-design-pattern/>Benefits-of-Iterator-Design-Pattern</a></li><li><a href=http://localhost:1313/tags/binary-tree-iterator/>Binary-Tree-Iterator</a></li><li><a href=http://localhost:1313/tags/binary-tree-iterator-with-c20-co-routines/>Binary-Tree-Iterator-With-C20-Co-Routines</a></li><li><a href=http://localhost:1313/tags/boost-iterator-facade-example/>Boost-Iterator-Facade-Example</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-c/>Iterator-Design-Pattern-C</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-c-code/>Iterator-Design-Pattern-C-Code</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-c-example/>Iterator-Design-Pattern-C-Example</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-cpp/>Iterator-Design-Pattern-Cpp</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-examples-in-c/>Iterator-Design-Pattern-Examples-in-C</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-implementation-in-c/>Iterator-Design-Pattern-Implementation-in-C</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-in-c/>Iterator-Design-Pattern-in-C</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-in-modern-c/>Iterator-Design-Pattern-in-Modern-C</a></li><li><a href=http://localhost:1313/tags/iterator-design-pattern-real-world-example/>Iterator-Design-Pattern-Real-World-Example</a></li><li><a href=http://localhost:1313/tags/what-is-the-purpose-of-iterator-design-pattern/>What-Is-the-Purpose-of-Iterator-Design-Pattern</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/interpreter-design-pattern-in-modern-cpp/><span class=title>« Prev</span><br><span>Interpreter Design Pattern in Modern C++</span>
</a><a class=next href=http://localhost:1313/posts/mediator-design-pattern-in-modern-cpp/><span class=title>Next »</span><br><span>Mediator Design Pattern in Modern C++</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on x" href="https://x.com/intent/tweet/?text=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f&amp;hashtags=advantages-and-disadvantages-of-iterator-design-pattern%2cbenefits-of-iterator-design-pattern%2cbinary-tree-iterator%2cbinary-tree-iterator-with-c20-co-routines%2cboost-iterator-facade-example%2citerator-design-pattern-c%2citerator-design-pattern-c-code%2citerator-design-pattern-c-example%2citerator-design-pattern-cpp%2citerator-design-pattern-examples-in-c%2citerator-design-pattern-implementation-in-c%2citerator-design-pattern-in-c%2citerator-design-pattern-in-modern-c%2citerator-design-pattern-real-world-example%2cwhat-is-the-purpose-of-iterator-design-pattern"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f&amp;title=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;summary=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f&title=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on whatsapp" href="https://api.whatsapp.com/send?text=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on telegram" href="https://telegram.me/share/url?text=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Iterator Design Pattern in Modern C++ on ycombinator" href="https://news.ycombinator.com/submitlink?t=Iterator%20Design%20Pattern%20in%20Modern%20C%2b%2b&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fiterator-design-pattern-in-modern-cpp%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Vishal Chovatiya</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>